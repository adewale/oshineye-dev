"use strict";var Garten=(()=>{var Te=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var kt=Object.getOwnPropertyNames;var It=Object.prototype.hasOwnProperty;var Ot=(t,e)=>{for(var i in e)Te(t,i,{get:e[i],enumerable:!0})},Ht=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of kt(e))!It.call(t,n)&&n!==i&&Te(t,n,{get:()=>e[n],enumerable:!(r=Gt(e,n))||r.enumerable});return t};var zt=t=>Ht(Te({},"__esModule",{value:!0}),t);var Pi={};Ot(Pi,{ANIMATION:()=>Z,CANVAS_STYLE:()=>ue,COLORS:()=>$,COMPLEXITY:()=>Nt,CanvasHelper:()=>Me,Color:()=>U,Environment:()=>H,EventEmitter:()=>ye,GEOMETRY:()=>L,GROWTH_PHASES:()=>F,Garten:()=>se,GrowthProgress:()=>Q,GrowthProgressPool:()=>K,LAYOUT:()=>Re,MutableGrowthProgress:()=>q,MutableVec2:()=>be,OPTION_BOUNDS:()=>_e,PETAL_COUNTS:()=>Wt,PLANTS_PER_GENERATION:()=>Pe,PLANT_CATEGORIES:()=>Ie,PLANT_SIZES:()=>Bt,PlantCategory:()=>j,PlantType:()=>he,SeededRandom:()=>ce,SimpleEventEmitter:()=>Ce,VARIATION_DEFAULTS:()=>V,Vec2:()=>oe,applyPreset:()=>Ee,applyTheme:()=>ze,calculateGrowthPhases:()=>Qe,calculateRawProgress:()=>tt,createConfig:()=>dt,createPreset:()=>Mt,createRandom:()=>I,createTheme:()=>bt,darkenColor:()=>lt,default:()=>se,densityPreset:()=>wt,disposeDefaultPool:()=>rt,drawLeaf:()=>we,drawLeafPair:()=>ut,drawStem:()=>at,flowerPalettes:()=>pe,foliagePalettes:()=>De,getDefaultPool:()=>ge,getPixelRatio:()=>ct,getPlantCategory:()=>ie,getPlantVariation:()=>Y,getPresetNames:()=>gt,getThemeNames:()=>ft,hasCanvasSupport:()=>pt,hexToRgb:()=>nt,isBrowser:()=>mt,isPlantActive:()=>et,lightenColor:()=>ot,prefersReducedMotion:()=>ht,presets:()=>Se,resetDefaultPool:()=>it,rgbToHex:()=>st,seededRandom:()=>D,speedPreset:()=>yt,themes:()=>le});var Bt={STEM_THICKNESS_BASE:2,STEM_THICKNESS_THICK:2.5,STEM_THICKNESS_THIN:1.5,TRUNK_WIDTH_BASE:6,TRUNK_WIDTH_CONIFER:4,FLOWER_SIZE_SIMPLE:18,FLOWER_SIZE_SUNFLOWER:25,FLOWER_SIZE_DAHLIA:24,FLOWER_SIZE_ROSE:20,FLOWER_SIZE_LILY:22,FLOWER_SIZE_TULIP:22,FLOWER_SIZE_DAISY:16,FLOWER_SIZE_WILDFLOWER:14,FLOWER_SIZE_ORCHID:18,FLOWER_SIZE_PEONY:22,FLOWER_SIZE_IRIS:20,FLOWER_SIZE_HYDRANGEA:28,FLOWER_SIZE_POPPY:18,LEAF_SIZE_BASE:15,LEAF_SIZE_LARGE:20,LEAF_SIZE_SMALL:12,LEAF_SIZE_TROPICAL:30,FOLIAGE_RADIUS_BASE:25},F={STEM_GROWTH_RATE:1.5,LEAF_START:.3,LEAF_GROWTH_RATE:2,FLOWER_START:.5,FLOWER_GROWTH_RATE:2,FOLIAGE_START:.4,FOLIAGE_GROWTH_RATE:1.7,PLUME_START:.8,BUSH_FLOWER_START:.7,BUSH_FLOWER_START_COMPLEX:.5,LAVENDER_SPIKE_START:.5,PALM_FROND_START:.3,CONIFER_FOLIAGE_START:.2},$={FLOWER_CENTER_GOLD:"#FFD700",FLOWER_CENTER_DARK:"#2D2D2D",SUNFLOWER_CENTER:"#4A3728",SUNFLOWER_CENTER_INNER:"#3D2D20",LILY_STAMENS:"#8B4513",DAHLIA_CENTER:"#DAA520",GRASS_PLUME:"#F5F5DC",LAVENDER_STEM:"#4A7C40",TULIP_STRIPE:"#FFFFFF",GROUND_COLOR:"rgba(139, 119, 101, 0.08)",CANVAS_BACKGROUND:"#ffffff",DEFAULT_ACCENT:"#F6821F",DEFAULT_FADE_COLOR:"#ffffff"},Z={DEFAULT_DURATION:600,DEFAULT_GENERATIONS:47,DEFAULT_TARGET_FPS:30,DEFAULT_MAX_PIXEL_RATIO:2,RESIZE_DEBOUNCE_MS:100,GROUND_HEIGHT:8},Re={DEFAULT_MAX_HEIGHT:.35,TALL_PLANT_HEIGHT_THRESHOLD:.5,TALL_GARDEN_THRESHOLD:.35,HEIGHT_BIAS_FACTOR:.5,TREE_TRUNK_RATIO:.6,CONIFER_TRUNK_RATIO:.95,TROPICAL_TRUNK_RATIO:.5,TALL_FLOWER_STEM_RATIO:1},Wt={SIMPLE_FLOWER:5,DAISY_MIN:8,DAISY_BASE:12,SUNFLOWER:16,ROSE_LAYERS:3,ROSE_LAYERS_COMPLEX:4,PEONY_LAYERS:5,DAHLIA_LAYERS:4,HYDRANGEA_FLORETS:20,SUCCULENT_LAYERS:3,SUCCULENT_LAYERS_COMPLEX:4,SUCCULENT_LEAVES:6,POPPY:4,IRIS_STANDARDS:3,ORCHID_SEPALS:3,ORCHID_SIDE_PETALS:2,LAVENDER_BUDS:8},V={SIZE_MULTIPLIER:1,HEIGHT_MULTIPLIER:1,PETAL_COUNT_MODIFIER:0,THICKNESS_MULTIPLIER:1,LEAN_MULTIPLIER:1,COMPLEXITY:.5},Nt={DETAIL_THRESHOLD:.6,TULIP_STRIPE_THRESHOLD:.6,GRASS_PLUME_THRESHOLD:.7,FERN_CURL_THRESHOLD:.7,BUSH_FLOWERING_THRESHOLD:.8,ROSE_COMPLEX_THRESHOLD:.8,VINE_FLOWER_THRESHOLD:.6},ue={LINE_CAP:"round",PLUME_ALPHA:.7,TULIP_STRIPE_ALPHA:.3},L={TWO_PI:Math.PI*2,PI:Math.PI,HALF_PI:Math.PI/2,BEZIER_CP_RATIO:.7,STEM_CP1_HEIGHT:.4,STEM_CP2_HEIGHT:.7,STEM_CP1_LEAN:.3,STEM_CP2_LEAN:.6},_e={DURATION:{min:1,max:86400},GENERATIONS:{min:1,max:1e3},MAX_HEIGHT:{min:.05,max:1},SPEED:{min:.01,max:100},MAX_PIXEL_RATIO:{min:.5,max:4},TARGET_FPS:{min:1,max:120},OPACITY:{min:0,max:1},FADE_HEIGHT:{min:0,max:1},Z_INDEX:{min:-9999,max:9999},SEED:{min:0,max:1e9}},Pe={sparse:[4,6],normal:[8,13],dense:[14,20],lush:[22,30]};var Ne={accent:$.DEFAULT_ACCENT,palette:"natural",flowerColors:[],foliageColors:[],accentWeight:.4},Ve={},_={duration:Z.DEFAULT_DURATION,generations:Z.DEFAULT_GENERATIONS,maxHeight:Re.DEFAULT_MAX_HEIGHT,colors:Ne,density:"normal",categories:null,loop:!1,speed:1,autoplay:!0,respectReducedMotion:!0,seed:Math.random()*1e5,maxPixelRatio:Z.DEFAULT_MAX_PIXEL_RATIO,targetFPS:Z.DEFAULT_TARGET_FPS,timingCurve:"linear",zIndex:-1,opacity:1,fadeHeight:0,fadeColor:$.DEFAULT_FADE_COLOR,events:Ve},Vt={duration:"DURATION",generations:"GENERATIONS",maxHeight:"MAX_HEIGHT",speed:"SPEED",maxPixelRatio:"MAX_PIXEL_RATIO",targetFPS:"TARGET_FPS",opacity:"OPACITY",fadeHeight:"FADE_HEIGHT",zIndex:"Z_INDEX",seed:"SEED"};function z(t,e){let i=Vt[e];if(!i)return t;let{min:r,max:n}=_e[i];return Math.min(n,Math.max(r,t))}var Ue=Pe;function Ut(t){try{return document.querySelector(t),!0}catch{return!1}}function Ae(t){let e;if(typeof t.container=="string"){if(!Ut(t.container))throw new Error(`Garten: Invalid selector format "${t.container}". Use simple selectors like "#id" or ".class".`);let n=document.querySelector(t.container);if(!n||!(n instanceof HTMLElement))throw new Error(`Garten: Container "${t.container}" not found`);e=n}else e=t.container;typeof process<"u"&&process?.env?.NODE_ENV!=="production"&&(e.isConnected||console.warn("Garten: Container is not connected to the DOM. Animation may not render."));let i={...Ne,...t.colors},r={...Ve,...t.events};return{container:e,duration:z(t.duration??_.duration,"duration"),generations:z(t.generations??_.generations,"generations"),maxHeight:z(t.maxHeight??_.maxHeight,"maxHeight"),colors:i,density:t.density??_.density,categories:t.categories??_.categories,loop:t.loop??_.loop,speed:z(t.speed??_.speed,"speed"),autoplay:t.autoplay??_.autoplay,respectReducedMotion:t.respectReducedMotion??_.respectReducedMotion,seed:z(typeof t.seed=="number"&&Number.isFinite(t.seed)?t.seed:Math.random()*1e5,"seed"),maxPixelRatio:z(t.maxPixelRatio??_.maxPixelRatio,"maxPixelRatio"),targetFPS:z(t.targetFPS??_.targetFPS,"targetFPS"),timingCurve:t.timingCurve??_.timingCurve,zIndex:z(t.zIndex??_.zIndex,"zIndex"),opacity:z(t.opacity??_.opacity,"opacity"),fadeHeight:z(t.fadeHeight??_.fadeHeight,"fadeHeight"),fadeColor:t.fadeColor??_.fadeColor,events:r}}var j=(g=>(g[g.SimpleFlower=0]="SimpleFlower",g[g.Tulip=1]="Tulip",g[g.Daisy=2]="Daisy",g[g.Wildflower=3]="Wildflower",g[g.Grass=4]="Grass",g[g.Fern=5]="Fern",g[g.Bush=6]="Bush",g[g.Rose=7]="Rose",g[g.Lily=8]="Lily",g[g.Orchid=9]="Orchid",g[g.Succulent=10]="Succulent",g[g.Herb=11]="Herb",g[g.Specialty=12]="Specialty",g[g.TallFlower=13]="TallFlower",g[g.GiantGrass=14]="GiantGrass",g[g.Climber=15]="Climber",g[g.SmallTree=16]="SmallTree",g[g.Tropical=17]="Tropical",g[g.Conifer=18]="Conifer",g))(j||{}),he=(c=>(c.SimpleFlower="simple-flower",c.SimpleFlowerSmall="simple-flower-small",c.SimpleFlowerLarge="simple-flower-large",c.SimpleFlowerTall="simple-flower-tall",c.SimpleFlowerShort="simple-flower-short",c.SimpleFlowerWide="simple-flower-wide",c.SimpleFlowerNarrow="simple-flower-narrow",c.SimpleFlowerDouble="simple-flower-double",c.SimpleFlowerClustered="simple-flower-clustered",c.SimpleFlowerSpiral="simple-flower-spiral",c.Tulip="tulip",c.TulipTall="tulip-tall",c.TulipShort="tulip-short",c.TulipDouble="tulip-double",c.TulipFringed="tulip-fringed",c.TulipParrot="tulip-parrot",c.TulipLily="tulip-lily",c.TulipRembrandt="tulip-rembrandt",c.TulipDarwin="tulip-darwin",c.TulipTriumph="tulip-triumph",c.Daisy="daisy",c.DaisySmall="daisy-small",c.DaisyLarge="daisy-large",c.DaisyDouble="daisy-double",c.DaisyGerbera="daisy-gerbera",c.DaisyShasta="daisy-shasta",c.DaisyAfrican="daisy-african",c.DaisyOxeye="daisy-oxeye",c.DaisyPainted="daisy-painted",c.DaisyMarguerite="daisy-marguerite",c.Wildflower="wildflower",c.WildflowerClustered="wildflower-clustered",c.WildflowerScattered="wildflower-scattered",c.WildflowerTall="wildflower-tall",c.WildflowerMeadow="wildflower-meadow",c.WildflowerPrairie="wildflower-prairie",c.WildflowerAlpine="wildflower-alpine",c.WildflowerWoodland="wildflower-woodland",c.WildflowerCoastal="wildflower-coastal",c.WildflowerDesert="wildflower-desert",c.Grass="grass",c.GrassTall="grass-tall",c.GrassShort="grass-short",c.GrassWispy="grass-wispy",c.GrassThick="grass-thick",c.GrassPampas="grass-pampas",c.GrassFountain="grass-fountain",c.GrassBlue="grass-blue",c.GrassFeather="grass-feather",c.GrassReed="grass-reed",c.Fern="fern",c.FernSmall="fern-small",c.FernLarge="fern-large",c.FernCurly="fern-curly",c.FernStraight="fern-straight",c.FernMaidenhair="fern-maidenhair",c.FernBoston="fern-boston",c.FernStaghorn="fern-staghorn",c.FernBird="fern-bird",c.FernTree="fern-tree",c.Bush="bush",c.BushSmall="bush-small",c.BushLarge="bush-large",c.BushFlowering="bush-flowering",c.BushBerry="bush-berry",c.BushRound="bush-round",c.BushSpreading="bush-spreading",c.BushCompact="bush-compact",c.BushWild="bush-wild",c.BushOrnamental="bush-ornamental",c.Rose="rose",c.RoseClimbing="rose-climbing",c.RoseMiniature="rose-miniature",c.RoseWild="rose-wild",c.RoseDouble="rose-double",c.Lily="lily",c.LilyTiger="lily-tiger",c.LilyCalla="lily-calla",c.LilyDaylily="lily-daylily",c.LilyStargazer="lily-stargazer",c.Orchid="orchid",c.OrchidMoth="orchid-moth",c.OrchidDendrobium="orchid-dendrobium",c.OrchidCattleya="orchid-cattleya",c.OrchidVanda="orchid-vanda",c.Succulent="succulent",c.SucculentRosette="succulent-rosette",c.SucculentSpiky="succulent-spiky",c.SucculentTrailing="succulent-trailing",c.SucculentFlowering="succulent-flowering",c.Lavender="lavender",c.LavenderTall="lavender-tall",c.Sage="sage",c.Thyme="thyme",c.Rosemary="rosemary",c.Poppy="poppy",c.Sunflower="sunflower",c.Iris="iris",c.Peony="peony",c.Hydrangea="hydrangea",c.Dahlia="dahlia",c.Hollyhock="hollyhock",c.HollyhockDouble="hollyhock-double",c.Delphinium="delphinium",c.DelphiniumTall="delphinium-tall",c.Foxglove="foxglove",c.FoxgloveTall="foxglove-tall",c.Gladiolus="gladiolus",c.Lupine="lupine",c.Bamboo="bamboo",c.BambooTall="bamboo-tall",c.BambooClump="bamboo-clump",c.GiantReed="giant-reed",c.ElephantGrass="elephant-grass",c.Miscanthus="miscanthus",c.MiscanthusTall="miscanthus-tall",c.Cortaderia="cortaderia",c.Vine="vine",c.VineFlowering="vine-flowering",c.VineIvy="vine-ivy",c.Wisteria="wisteria",c.WisteriaCascade="wisteria-cascade",c.Clematis="clematis",c.ClematisLarge="clematis-large",c.MorningGlory="morning-glory",c.Sapling="sapling",c.SaplingOak="sapling-oak",c.SaplingMaple="sapling-maple",c.SaplingBirch="sapling-birch",c.TreeYoung="tree-young",c.TreeOrnamental="tree-ornamental",c.Birch="birch",c.Willow="willow",c.WillowWeeping="willow-weeping",c.CherryBlossom="cherry-blossom",c.PalmSmall="palm-small",c.PalmFan="palm-fan",c.BirdOfParadise="bird-of-paradise",c.BirdOfParadiseTall="bird-of-paradise-tall",c.Banana="banana",c.BananaSmall="banana-small",c.Pine="pine",c.PineYoung="pine-young",c.Cypress="cypress",c.CypressTall="cypress-tall",c.Juniper="juniper",c.JuniperTall="juniper-tall",c))(he||{});var ce=class t{constructor(e){this._initialSeed=e,this._seed=e}get seed(){return this._seed}get initialSeed(){return this._initialSeed}next(){let e=Math.sin(this._seed++*9999)*1e4;return e-Math.floor(e)}reset(){this._seed=this._initialSeed}setSeed(e){this._seed=e,this._initialSeed=e}fork(){return new t(this._seed*1e3+Math.floor(this.next()*1e3))}createGenerator(){let e=this.fork();return()=>e.next()}range(e,i){return e+this.next()*(i-e)}int(e,i){return Math.floor(this.range(e,i+1))}below(e){return Math.floor(this.next()*e)}centered(e){return(this.next()-.5)*2*e}around(e,i){return e+this.centered(i)}bool(){return this.next()<.5}chance(e){return this.next()<e}sign(){return this.bool()?1:-1}pick(e){if(e.length===0)throw new Error("SeededRandom.pick: Cannot pick from empty array");return e[this.below(e.length)]}pickIndex(e){if(e.length===0)throw new Error("SeededRandom.pickIndex: Cannot pick from empty array");return this.below(e.length)}pickMultiple(e,i){if(i>e.length)throw new Error("SeededRandom.pickMultiple: Count exceeds array length");let r=[],n=new Set;for(;r.length<i;){let s=this.below(e.length);n.has(s)||(n.add(s),r.push(e[s]))}return r}weightedPick(e){if(e.length===0)throw new Error("SeededRandom.weightedPick: Cannot pick from empty array");let i=e.reduce((n,s)=>n+s.weight,0),r=this.next()*i;for(let n of e)if(r-=n.weight,r<=0)return n.value;return e[e.length-1].value}shuffle(e){for(let i=e.length-1;i>0;i--){let r=this.below(i+1);[e[i],e[r]]=[e[r],e[i]]}return e}shuffled(e){let i=[...e];return this.shuffle(i)}gaussian(e=0,i=1){let r=this.next(),n=this.next();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*n)*i+e}exponential(e=1){return-Math.log(1-this.next())/e}biased(e){return Math.pow(this.next(),e)}centeredBias(){return(this.next()+this.next())/2}edgeBias(){let e=this.next()*2-1;return Math.abs(e)}angle(){return this.next()*Math.PI*2}degrees(){return this.next()*360}pointInCircle(){let e=this.angle(),i=Math.sqrt(this.next());return{x:Math.cos(e)*i,y:Math.sin(e)*i}}pointOnCircle(){let e=this.angle();return{x:Math.cos(e),y:Math.sin(e)}}pointInRect(e,i){return{x:this.next()*e,y:this.next()*i}}getState(){return{seed:this._seed,initialSeed:this._initialSeed}}setState(e){this._seed=e.seed,this._initialSeed=e.initialSeed}skip(e){this._seed+=e}static random(){return new t(Math.random()*1e5)}static fromString(e){let i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);i=(i<<5)-i+n,i=i&i}return new t(Math.abs(i))}};function D(t){let e=Math.sin(t*9999)*1e4;return e-Math.floor(e)}function I(t){let e=t;return()=>D(e++)}function ee(t,e,i){return t+i()*(e-t)}function me(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(!e)return null;let i=parseInt(e[1],16),r=parseInt(e[2],16),n=parseInt(e[3],16);return isNaN(i)||isNaN(r)||isNaN(n)?null:{r:i,g:r,b:n}}function Ye(t,e,i){return"#"+[t,e,i].map(r=>Math.round(r).toString(16).padStart(2,"0")).join("")}function J(t,e){let i=me(t);return i?Ye(Math.min(255,i.r+(255-i.r)*e),Math.min(255,i.g+(255-i.g)*e),Math.min(255,i.b+(255-i.b)*e)):t}function P(t,e){let i=me(t);return i?Ye(i.r*(1-e),i.g*(1-e),i.b*(1-e)):t}function qe(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Ke(t){return typeof window>"u"?1:Math.min(window.devicePixelRatio||1,t)}function Xe(t,e){let i,r=(...n)=>{i!==void 0&&clearTimeout(i),i=setTimeout(()=>t(...n),e)};return r.cancel=()=>{i!==void 0&&(clearTimeout(i),i=void 0)},r}function Yt(t){if(typeof t=="number")return Math.max(.1,Math.min(10,t));switch(t){case"ease-out":return 2;case"ease-in":return .5;case"ease-in-out":return 1;default:return 1}}function Le(t,e,i){if(e<=0)return 0;let r=t/e;if(i==="linear"||i===1)return r;if(i==="ease-in-out"){let s=r;return s*s*(3-2*s)}let n=Yt(i);return n>1?1-Math.pow(1-r,n):Math.pow(r,1/n)}var pe={natural:["#E85D75","#D64550","#F4A4B0","#C71585","#F4D03F","#FFDB58","#FFE135","#DAA520","#9B72AA","#7B68EE","#6A5ACD","#8A2BE2","#FFFEF0","#FFF8DC","#FFEFD5","#FAF0E6"],warm:["#FF6B6B","#FFA07A","#FFD93D","#FF8C42","#E85D75","#F4A4B0","#FFDB58","#FFE135","#FFF8DC","#FFEFD5"],cool:["#7B68EE","#6A5ACD","#9B72AA","#8A2BE2","#87CEEB","#B0E0E6","#ADD8E6","#E6E6FA","#FFFEF0","#F0F8FF"],grayscale:["#FFFFFF","#F5F5F5","#E8E8E8","#DCDCDC","#D3D3D3","#C0C0C0","#A9A9A9","#989898"],vibrant:["#FF1493","#FF4500","#FFD700","#32CD32","#00CED1","#1E90FF","#9400D3","#FF69B4","#FFA500","#ADFF2F"],monotone:[]},De={natural:{leaves:["#228B22","#2E8B57","#3CB371","#6B8E23","#556B2F","#8FBC8F"],stems:["#2D5A27","#3D6B37","#4A7C40","#5D8A52"]},warm:{leaves:["#6B8E23","#808000","#9ACD32","#7CFC00","#556B2F"],stems:["#5D5A27","#6D6B37","#5A6C40","#7D8A52"]},cool:{leaves:["#2E8B57","#20B2AA","#3CB371","#00FA9A","#66CDAA"],stems:["#2D5A47","#3D6B57","#4A7C60","#5D8A72"]},grayscale:{leaves:["#696969","#808080","#A9A9A9","#778899","#708090"],stems:["#4D4D4D","#5D5D5D","#6A6A6A","#7D7D7D"]},vibrant:{leaves:["#00FF00","#32CD32","#00FA9A","#7FFF00","#ADFF2F"],stems:["#228B22","#008000","#006400","#2E8B57"]},monotone:{leaves:[],stems:[]}};function qt(t){return[t,J(t,.15),P(t,.15),J(t,.3),P(t,.08)]}function Kt(t){return[J(t,.45),J(t,.3),J(t,.15),t,P(t,.1),P(t,.2),P(t,.35)]}function Xt(t){return{leaves:[P(t,.25),P(t,.35),P(t,.3),P(t,.4),P(t,.2)],stems:[P(t,.5),P(t,.55),P(t,.6),P(t,.45)]}}function $e(t){if(t.flowerColors.length>0)return t.flowerColors;if(t.palette==="grayscale")return pe.grayscale;if(t.palette==="monotone")return Kt(t.accent);let e=pe[t.palette],i=qt(t.accent),r=e.length+i.length,n=Math.round(r*t.accentWeight),s=r-n,a=[];for(let o=0;o<n;o++)a.push(i[o%i.length]);for(let o=0;o<s;o++)a.push(e[o%e.length]);return a}function Ze(t){return t.foliageColors.length>0?{leaves:t.foliageColors,stems:t.foliageColors.map(e=>P(e,.2))}:t.palette==="monotone"?Xt(t.accent):De[t.palette]}var Ge={sizeMultiplier:V.SIZE_MULTIPLIER,heightMultiplier:V.HEIGHT_MULTIPLIER,petalCountModifier:V.PETAL_COUNT_MODIFIER,thicknessMultiplier:V.THICKNESS_MULTIPLIER,leanMultiplier:V.LEAN_MULTIPLIER,complexity:V.COMPLEXITY},$t=new Map([["simple-flower-small",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:-1,thicknessMultiplier:.8,complexity:.3}],["simple-flower-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.7}],["simple-flower-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.9,leanMultiplier:.7}],["simple-flower-short",{sizeMultiplier:1.1,heightMultiplier:.7,petalCountModifier:1,thicknessMultiplier:1.1,leanMultiplier:1.2,complexity:.4}],["simple-flower-wide",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:3,complexity:.6}],["simple-flower-narrow",{sizeMultiplier:.8,heightMultiplier:1.1,petalCountModifier:-2,thicknessMultiplier:.8,leanMultiplier:.9,complexity:.4}],["simple-flower-double",{sizeMultiplier:1.2,petalCountModifier:5,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.8}],["simple-flower-clustered",{sizeMultiplier:.6,heightMultiplier:.9,petalCountModifier:-1,thicknessMultiplier:.9,leanMultiplier:1.3,complexity:.7}],["simple-flower-spiral",{petalCountModifier:2,leanMultiplier:1.5,complexity:.9}],["tulip",{leanMultiplier:.5}],["tulip-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.9,leanMultiplier:.4}],["tulip-short",{sizeMultiplier:1.1,heightMultiplier:.7,thicknessMultiplier:1.1,leanMultiplier:.6,complexity:.4}],["tulip-double",{sizeMultiplier:1.2,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:.8}],["tulip-fringed",{leanMultiplier:.5,complexity:.9}],["tulip-parrot",{sizeMultiplier:1.3,heightMultiplier:.95,petalCountModifier:2,leanMultiplier:.7,complexity:1}],["tulip-lily",{sizeMultiplier:1.1,heightMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.6,complexity:.6}],["tulip-rembrandt",{leanMultiplier:.5,complexity:.7}],["tulip-darwin",{sizeMultiplier:1.15,heightMultiplier:1.2,leanMultiplier:.4}],["tulip-triumph",{sizeMultiplier:1.05,heightMultiplier:1.1,thicknessMultiplier:1.05,leanMultiplier:.5}],["daisy-small",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:-2,thicknessMultiplier:.8,complexity:.3}],["daisy-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:4,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.7}],["daisy-double",{sizeMultiplier:1.2,petalCountModifier:8,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.9}],["daisy-gerbera",{sizeMultiplier:1.5,petalCountModifier:6,thicknessMultiplier:1.3,leanMultiplier:.7,complexity:.8}],["daisy-shasta",{sizeMultiplier:1.3,heightMultiplier:1.15,petalCountModifier:4,thicknessMultiplier:1.1,leanMultiplier:.8,complexity:.6}],["daisy-african",{sizeMultiplier:1.1,heightMultiplier:.9,petalCountModifier:2,complexity:.7}],["daisy-oxeye",{sizeMultiplier:.9,thicknessMultiplier:.9,leanMultiplier:1.1,complexity:.4}],["daisy-painted",{heightMultiplier:.95,petalCountModifier:2,complexity:.8}],["daisy-marguerite",{sizeMultiplier:1.1,heightMultiplier:1.05,petalCountModifier:3,leanMultiplier:.9}],["wildflower-clustered",{sizeMultiplier:.8,heightMultiplier:.9,petalCountModifier:2,thicknessMultiplier:.9,leanMultiplier:1.2,complexity:.7}],["wildflower-scattered",{sizeMultiplier:.7,petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:1.5,complexity:.6}],["wildflower-tall",{sizeMultiplier:.9,heightMultiplier:1.4,thicknessMultiplier:.9,leanMultiplier:.8}],["wildflower-meadow",{sizeMultiplier:1.1,petalCountModifier:1,leanMultiplier:1.3,complexity:.6}],["wildflower-prairie",{heightMultiplier:1.2,thicknessMultiplier:1.1}],["wildflower-alpine",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:.8,complexity:.4}],["wildflower-woodland",{sizeMultiplier:.9,heightMultiplier:.9,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:1.1,complexity:.6}],["wildflower-coastal",{sizeMultiplier:.8,heightMultiplier:.8,leanMultiplier:1.4}],["wildflower-desert",{sizeMultiplier:.7,heightMultiplier:.6,petalCountModifier:-1,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.4}],["grass",{complexity:.3}],["grass-tall",{heightMultiplier:1.5,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.8,complexity:.4}],["grass-short",{heightMultiplier:.6,thicknessMultiplier:1.1,leanMultiplier:1.2,complexity:.2}],["grass-wispy",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:.6,leanMultiplier:1.5}],["grass-thick",{sizeMultiplier:1.2,heightMultiplier:.9,petalCountModifier:-1,thicknessMultiplier:1.5,leanMultiplier:.7,complexity:.3}],["grass-pampas",{sizeMultiplier:1.3,heightMultiplier:1.8,petalCountModifier:3,thicknessMultiplier:1.2,complexity:.8}],["grass-fountain",{sizeMultiplier:1.1,heightMultiplier:1.3,petalCountModifier:4,thicknessMultiplier:.8,leanMultiplier:1.8,complexity:.7}],["grass-blue",{sizeMultiplier:.9,heightMultiplier:.8,petalCountModifier:1,complexity:.4}],["grass-feather",{heightMultiplier:1.4,petalCountModifier:2,thicknessMultiplier:.7,leanMultiplier:1.3,complexity:.6}],["grass-reed",{sizeMultiplier:.9,heightMultiplier:1.6,thicknessMultiplier:1.3,leanMultiplier:.5,complexity:.4}],["fern",{complexity:.6}],["fern-small",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-2,thicknessMultiplier:.8,complexity:.4}],["fern-large",{sizeMultiplier:1.4,heightMultiplier:1.3,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.8}],["fern-curly",{heightMultiplier:.9,petalCountModifier:1,leanMultiplier:1.8,complexity:.9}],["fern-straight",{sizeMultiplier:.9,heightMultiplier:1.2,leanMultiplier:.3,complexity:.4}],["fern-maidenhair",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:4,thicknessMultiplier:.6,leanMultiplier:1.5,complexity:.9}],["fern-boston",{sizeMultiplier:1.2,petalCountModifier:2,leanMultiplier:1.6,complexity:.7}],["fern-staghorn",{sizeMultiplier:1.3,heightMultiplier:.9,thicknessMultiplier:1.3,complexity:.8}],["fern-bird",{sizeMultiplier:1.1,heightMultiplier:1.1,petalCountModifier:-1,thicknessMultiplier:1.2,leanMultiplier:.7}],["fern-tree",{sizeMultiplier:1.5,heightMultiplier:1.5,petalCountModifier:4,thicknessMultiplier:1.4,leanMultiplier:.5,complexity:.9}],["bush",{complexity:.6}],["bush-small",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-2,thicknessMultiplier:.9,complexity:.4}],["bush-large",{sizeMultiplier:1.5,heightMultiplier:1.3,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.8}],["bush-flowering",{sizeMultiplier:1.1,petalCountModifier:4,complexity:.9}],["bush-berry",{sizeMultiplier:.9,heightMultiplier:.9,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.7}],["bush-round",{sizeMultiplier:1.2,heightMultiplier:.8,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.5}],["bush-spreading",{sizeMultiplier:1.3,heightMultiplier:.7,petalCountModifier:1,leanMultiplier:1.5,complexity:.6}],["bush-compact",{sizeMultiplier:.8,heightMultiplier:.8,thicknessMultiplier:1.3,leanMultiplier:.7,complexity:.4}],["bush-wild",{sizeMultiplier:1.1,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:.9,leanMultiplier:1.4,complexity:.8}],["bush-ornamental",{petalCountModifier:3,leanMultiplier:.8,complexity:.7}],["rose",{leanMultiplier:.8,complexity:.8}],["rose-climbing",{sizeMultiplier:.9,heightMultiplier:1.5,thicknessMultiplier:.9,leanMultiplier:1.2,complexity:.7}],["rose-miniature",{sizeMultiplier:.5,heightMultiplier:.6,petalCountModifier:-2,thicknessMultiplier:.7,leanMultiplier:.9,complexity:.6}],["rose-wild",{sizeMultiplier:.8,heightMultiplier:1.1,petalCountModifier:-3,thicknessMultiplier:.8,leanMultiplier:1.3}],["rose-double",{sizeMultiplier:1.2,petalCountModifier:8,thicknessMultiplier:1.1,leanMultiplier:.7,complexity:1}],["lily",{leanMultiplier:.7,complexity:.7}],["lily-tiger",{sizeMultiplier:1.1,heightMultiplier:1.1,leanMultiplier:.8,complexity:.9}],["lily-calla",{sizeMultiplier:.9,heightMultiplier:1.2,petalCountModifier:-4,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:.6}],["lily-daylily",{heightMultiplier:.9,thicknessMultiplier:.9}],["lily-stargazer",{sizeMultiplier:1.2,leanMultiplier:.6,complexity:.8}],["orchid",{leanMultiplier:.6,complexity:.9}],["orchid-moth",{sizeMultiplier:1.1,heightMultiplier:.9,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.8}],["orchid-dendrobium",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:.8,leanMultiplier:.8,complexity:.9}],["orchid-cattleya",{sizeMultiplier:1.3,heightMultiplier:.95,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:1}],["orchid-vanda",{heightMultiplier:1.1,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.85}],["succulent",{thicknessMultiplier:1.5,leanMultiplier:.3}],["succulent-rosette",{sizeMultiplier:1.1,heightMultiplier:.6,petalCountModifier:3,thicknessMultiplier:1.4,leanMultiplier:.2,complexity:.7}],["succulent-spiky",{sizeMultiplier:.9,heightMultiplier:1.2,petalCountModifier:-2,thicknessMultiplier:1.6,leanMultiplier:.4,complexity:.6}],["succulent-trailing",{sizeMultiplier:.7,heightMultiplier:.5,petalCountModifier:2,thicknessMultiplier:1.3,leanMultiplier:2,complexity:.6}],["succulent-flowering",{heightMultiplier:.8,petalCountModifier:4,thicknessMultiplier:1.4,leanMultiplier:.3,complexity:.8}],["lavender",{thicknessMultiplier:.8,leanMultiplier:.8,complexity:.7}],["lavender-tall",{sizeMultiplier:.9,heightMultiplier:1.4,petalCountModifier:2,thicknessMultiplier:.7,leanMultiplier:.6,complexity:.7}],["sage",{sizeMultiplier:1.1,heightMultiplier:.8,thicknessMultiplier:1.1,leanMultiplier:.9}],["thyme",{sizeMultiplier:.6,heightMultiplier:.5,petalCountModifier:-1,thicknessMultiplier:.7,leanMultiplier:1.2,complexity:.4}],["rosemary",{sizeMultiplier:.8,heightMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.6}],["poppy",{petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:1.2,complexity:.6}],["sunflower",{sizeMultiplier:1.8,heightMultiplier:1.6,petalCountModifier:8,thicknessMultiplier:1.5,leanMultiplier:.4,complexity:.7}],["iris",{sizeMultiplier:1.1,heightMultiplier:1.2,leanMultiplier:.5,complexity:.8}],["peony",{sizeMultiplier:1.4,heightMultiplier:.9,petalCountModifier:10,thicknessMultiplier:1.3,leanMultiplier:.6,complexity:1}],["hydrangea",{sizeMultiplier:1.5,heightMultiplier:.85,petalCountModifier:15,thicknessMultiplier:1.4,leanMultiplier:.5,complexity:.9}],["dahlia",{sizeMultiplier:1.3,petalCountModifier:12,thicknessMultiplier:1.2,leanMultiplier:.6,complexity:.95}],["hollyhock",{thicknessMultiplier:1.2,leanMultiplier:.3,complexity:.7}],["hollyhock-double",{sizeMultiplier:1.2,heightMultiplier:1.1,petalCountModifier:5,thicknessMultiplier:1.3,leanMultiplier:.2,complexity:.9}],["delphinium",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,leanMultiplier:.2,complexity:.8}],["delphinium-tall",{sizeMultiplier:.7,heightMultiplier:1.4,petalCountModifier:3,thicknessMultiplier:.9,leanMultiplier:.15,complexity:.85}],["foxglove",{sizeMultiplier:.9,heightMultiplier:1.1,thicknessMultiplier:1.1,leanMultiplier:.25,complexity:.75}],["foxglove-tall",{sizeMultiplier:.85,heightMultiplier:1.3,petalCountModifier:2,leanMultiplier:.2,complexity:.8}],["gladiolus",{sizeMultiplier:1.1,heightMultiplier:1.15,petalCountModifier:1,thicknessMultiplier:1.2,leanMultiplier:.2,complexity:.7}],["lupine",{sizeMultiplier:.9,petalCountModifier:4,leanMultiplier:.3,complexity:.75}],["bamboo",{thicknessMultiplier:.8,leanMultiplier:.15,complexity:.6}],["bamboo-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.7,leanMultiplier:.1,complexity:.65}],["bamboo-clump",{sizeMultiplier:1.2,heightMultiplier:.9,petalCountModifier:3,thicknessMultiplier:.9,leanMultiplier:.2,complexity:.7}],["giant-reed",{sizeMultiplier:1.1,heightMultiplier:1.1,leanMultiplier:.25}],["elephant-grass",{sizeMultiplier:1.3,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.3,complexity:.55}],["miscanthus",{petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.35,complexity:.6}],["miscanthus-tall",{sizeMultiplier:.95,heightMultiplier:1.25,petalCountModifier:2,thicknessMultiplier:.85,leanMultiplier:.3,complexity:.65}],["cortaderia",{sizeMultiplier:1.4,heightMultiplier:1.15,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.4,complexity:.7}],["vine",{thicknessMultiplier:.6,leanMultiplier:.8,complexity:.6}],["vine-flowering",{sizeMultiplier:1.2,petalCountModifier:3,thicknessMultiplier:.7,leanMultiplier:.7,complexity:.75}],["vine-ivy",{sizeMultiplier:.8,heightMultiplier:1.1,thicknessMultiplier:.5,leanMultiplier:.9,complexity:.7}],["wisteria",{sizeMultiplier:1.3,heightMultiplier:1.15,petalCountModifier:5,thicknessMultiplier:.8,leanMultiplier:.6,complexity:.85}],["wisteria-cascade",{sizeMultiplier:1.4,heightMultiplier:1.25,petalCountModifier:8,thicknessMultiplier:.9,leanMultiplier:.5,complexity:.9}],["clematis",{sizeMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:.6,leanMultiplier:.75,complexity:.7}],["clematis-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:4,thicknessMultiplier:.7,leanMultiplier:.65,complexity:.8}],["morning-glory",{sizeMultiplier:1.2,heightMultiplier:1.05,thicknessMultiplier:.55,leanMultiplier:.85,complexity:.65}],["sapling",{leanMultiplier:.1}],["sapling-oak",{sizeMultiplier:1.2,heightMultiplier:.95,petalCountModifier:2,thicknessMultiplier:1.3,leanMultiplier:.08,complexity:.6}],["sapling-maple",{sizeMultiplier:1.1,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.12,complexity:.65}],["sapling-birch",{sizeMultiplier:.9,heightMultiplier:1.15,petalCountModifier:1,thicknessMultiplier:.8,leanMultiplier:.15,complexity:.55}],["tree-young",{sizeMultiplier:1.15,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.1,complexity:.6}],["tree-ornamental",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:5,thicknessMultiplier:1.1,leanMultiplier:.12,complexity:.75}],["birch",{sizeMultiplier:.85,heightMultiplier:1.2,thicknessMultiplier:.75,leanMultiplier:.18,complexity:.6}],["willow",{sizeMultiplier:1.2,petalCountModifier:4,leanMultiplier:.2,complexity:.7}],["willow-weeping",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:6,thicknessMultiplier:1.1,leanMultiplier:.15,complexity:.85}],["cherry-blossom",{sizeMultiplier:1.3,heightMultiplier:.95,petalCountModifier:8,leanMultiplier:.12,complexity:.9}],["palm-small",{leanMultiplier:.15,complexity:.6}],["palm-fan",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.1,complexity:.7}],["bird-of-paradise",{sizeMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.2,complexity:.8}],["bird-of-paradise-tall",{heightMultiplier:1.2,petalCountModifier:1,thicknessMultiplier:.85,leanMultiplier:.18,complexity:.85}],["banana",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.4,leanMultiplier:.12,complexity:.65}],["banana-small",{sizeMultiplier:1.1,heightMultiplier:.85,petalCountModifier:1,thicknessMultiplier:1.2,leanMultiplier:.15,complexity:.6}],["pine",{thicknessMultiplier:1.2,leanMultiplier:.05,complexity:.6}],["pine-young",{sizeMultiplier:.8,heightMultiplier:.85,petalCountModifier:-1,leanMultiplier:.08}],["cypress",{sizeMultiplier:.7,heightMultiplier:1.15,thicknessMultiplier:.9,leanMultiplier:.03,complexity:.55}],["cypress-tall",{sizeMultiplier:.6,heightMultiplier:1.3,thicknessMultiplier:.85,leanMultiplier:.02,complexity:.6}],["juniper",{sizeMultiplier:1.1,heightMultiplier:.9,petalCountModifier:1,thicknessMultiplier:1.1,leanMultiplier:.1,complexity:.55}],["juniper-tall",{sizeMultiplier:.9,heightMultiplier:1.1,leanMultiplier:.07,complexity:.6}]]);function Y(t){let e=$t.get(t);return e?{...Ge,...e}:Ge}var ke={"simple-flower":0,tulip:1,daisy:2,wildflower:3,grass:4,fern:5,bush:6,rose:7,lily:8,orchid:9,succulent:10,herb:11,specialty:12,"tall-flower":13,"giant-grass":14,climber:15,"small-tree":16,tropical:17,conifer:18},Ie=Object.keys(ke);function Zt(t){if(!t||t.length===0)return null;let e=new Set;for(let i of t){let r=ke[i.toLowerCase()];if(r!==void 0)e.add(r);else if(typeof process<"u"&&process?.env?.NODE_ENV!=="production"){let n=Object.keys(ke).join(", ");console.warn(`Garten: Unknown category "${i}". Valid categories: ${n}`)}}return e.size>0?e:null}var jt=[{category:0,weight:.15},{category:1,weight:.1},{category:2,weight:.1},{category:3,weight:.1},{category:4,weight:.12},{category:5,weight:.08},{category:6,weight:.08},{category:7,weight:.06},{category:8,weight:.05},{category:9,weight:.04},{category:10,weight:.04},{category:11,weight:.04},{category:12,weight:.04},{category:13,weight:.06},{category:14,weight:.05},{category:15,weight:.04},{category:16,weight:.04},{category:17,weight:.03},{category:18,weight:.03}],je={0:["simple-flower","simple-flower-small","simple-flower-large","simple-flower-tall","simple-flower-short","simple-flower-wide","simple-flower-narrow","simple-flower-double","simple-flower-clustered","simple-flower-spiral"],1:["tulip","tulip-tall","tulip-short","tulip-double","tulip-fringed","tulip-parrot","tulip-lily","tulip-rembrandt","tulip-darwin","tulip-triumph"],2:["daisy","daisy-small","daisy-large","daisy-double","daisy-gerbera","daisy-shasta","daisy-african","daisy-oxeye","daisy-painted","daisy-marguerite"],3:["wildflower","wildflower-clustered","wildflower-scattered","wildflower-tall","wildflower-meadow","wildflower-prairie","wildflower-alpine","wildflower-woodland","wildflower-coastal","wildflower-desert"],4:["grass","grass-tall","grass-short","grass-wispy","grass-thick","grass-pampas","grass-fountain","grass-blue","grass-feather","grass-reed"],5:["fern","fern-small","fern-large","fern-curly","fern-straight","fern-maidenhair","fern-boston","fern-staghorn","fern-bird","fern-tree"],6:["bush","bush-small","bush-large","bush-flowering","bush-berry","bush-round","bush-spreading","bush-compact","bush-wild","bush-ornamental"],7:["rose","rose-climbing","rose-miniature","rose-wild","rose-double"],8:["lily","lily-tiger","lily-calla","lily-daylily","lily-stargazer"],9:["orchid","orchid-moth","orchid-dendrobium","orchid-cattleya","orchid-vanda"],10:["succulent","succulent-rosette","succulent-spiky","succulent-trailing","succulent-flowering"],11:["lavender","lavender-tall","sage","thyme","rosemary"],12:["poppy","sunflower","iris","peony","hydrangea","dahlia"],13:["hollyhock","hollyhock-double","delphinium","delphinium-tall","foxglove","foxglove-tall","gladiolus","lupine"],14:["bamboo","bamboo-tall","bamboo-clump","giant-reed","elephant-grass","miscanthus","miscanthus-tall","cortaderia"],15:["vine","vine-flowering","vine-ivy","wisteria","wisteria-cascade","clematis","clematis-large","morning-glory"],16:["sapling","sapling-oak","sapling-maple","sapling-birch","tree-young","tree-ornamental","birch","willow","willow-weeping","cherry-blossom"],17:["palm-small","palm-fan","bird-of-paradise","bird-of-paradise-tall","banana","banana-small"],18:["pine","pine-young","cypress","cypress-tall","juniper","juniper-tall"]},Je={0:[.1,.22],1:[.12,.22],2:[.1,.2],3:[.08,.18],4:[.03,.1],5:[.06,.14],6:[.08,.16],7:[.12,.25],8:[.14,.26],9:[.1,.2],10:[.04,.1],11:[.06,.14],12:[.12,.28],13:[.3,.5],14:[.4,.7],15:[.5,.9],16:[.6,1],17:[.5,.85],18:[.55,1]},de=new Map;for(let t of Object.values(j).filter(e=>typeof e=="number")){let e=je[t];if(e)for(let i of e)de.set(i,t)}var Jt=new Set([13,14,15,16,17,18]);function Qt(t,e){let i=jt.filter(({category:a})=>{let[o]=Je[a];return!(o>t||e&&!e.has(a))});if(i.length===0){typeof process<"u"&&process?.env?.NODE_ENV!=="production"&&console.warn("Garten: No categories available for current maxHeight. Falling back to SimpleFlower.");let a=e&&e.size>0?e.values().next().value:0;return{adjustedWeights:[{category:a,weight:1}],totalWeight:1,fallback:a}}let r=1+Math.max(0,(t-.35)/.65)*3,n=0;return{adjustedWeights:i.map(({category:a,weight:o})=>{let l=Jt.has(a)?o*r:o;return n+=l,{category:a,weight:l}}),totalWeight:n,fallback:i[0].category}}function ei(t,e){let{adjustedWeights:i,totalWeight:r,fallback:n}=e,s=t()*r,a=0;for(let{category:o,weight:l}of i)if(a+=l,s<a)return o;return n}function ti(t,e){let i=ei(t,e),r=je[i];return!r||r.length===0?"simple-flower":r[Math.floor(t()*r.length)]}function ii(t,e){let i=de.get(t)??0,[r,n]=Je[i];return[r,Math.min(n,e)]}function ri(t,e,i,r){let n=e-t;if(i>.5&&e>.4){let s=(i-.5)/.5,a=Math.pow(r(),1-s*.5);return t+n*a}return t+n*r()}function te(t){let{duration:e,generations:i,maxHeight:r,density:n,seed:s,colors:a,timingCurve:o,categories:l}=t,[h,m]=Ue[n],u=Zt(l),p=Qt(r,u),d=$e(a),f=Ze(a);if(d.length===0)throw new Error("Garten: No flower colors available. Check palette configuration.");if(f.leaves.length===0||f.stems.length===0)throw new Error("Garten: No foliage colors available. Check palette configuration.");let M=(h+m)/2,w=Math.ceil(i*M*1.1),b=[];b.length=w;let S=0,g=0;for(let y=0;y<i;y++){let x=Le(y,i,o),A=Le(y+1,i,o),R=x*e,G=(A-x)*e,xe=I(s+y*1e3),ae=Math.floor(ee(h,m+1,xe));for(let W=0;W<ae;W++){let T=I(s+y*1e3+W*100),X=ti(T,p),Fe=T(),[ve,Ct]=ii(X,r),St=ri(ve,Ct,r,T),Et=Math.floor(T()*d.length),xt=Math.floor(T()*f.leaves.length),Ft=Math.floor(T()*f.stems.length),Be=Math.max(.1,e*.01),vt=R+T()*G*.5,We=Math.min(vt,e-Be),Tt=G*ee(.6,1,T),Rt=Math.max(Be,Math.min(Tt,e-We)),_t=5+Math.floor(T()*4),Pt=(T()-.5)*.3,At=Math.max(.1,ee(.7,1.2,T)),Lt=de.get(X)??0,Dt=Y(X);b[g++]={id:S++,type:X,x:Fe,maxHeight:St,flowerColor:d[Et],stemColor:f.stems[Ft],leafColor:f.leaves[xt],delay:We,growDuration:Rt,seed:s+y*1e3+W*100,petals:_t,lean:Pt,scale:At,generation:y,category:Lt,variation:Dt}}}return b.length=g,b.sort((y,x)=>y.maxHeight-x.maxHeight),b}function Oe(t,e,i,r){let n=i/r,s=Math.floor(t/n),a=Math.floor(e/n);return a>s&&a<=r?s+1:null}function ie(t){return de.get(t)??0}var k=class k{constructor(e,i=k.defaultConfig){this._progress=Math.max(0,Math.min(1,e)),this._stem=Math.min(1,this._progress*i.stemRate),this._leaf=Math.max(0,Math.min(1,(this._progress-i.leafStart)*i.leafRate)),this._flower=Math.max(0,Math.min(1,(this._progress-i.flowerStart)*i.flowerRate)),this._foliage=Math.max(0,Math.min(1,(this._progress-F.FOLIAGE_START)*F.FOLIAGE_GROWTH_RATE)),this._plume=this._progress>F.PLUME_START?(this._progress-F.PLUME_START)/(1-F.PLUME_START):0}static calculate(e,i,r,n){let s=(e-i)/r,a=n?{...k.defaultConfig,...n}:k.defaultConfig;return new k(s,a)}static fromProgress(e,i){let r=i?{...k.defaultConfig,...i}:k.defaultConfig;return new k(e,r)}static inactive(){return new k(0)}static complete(){return new k(1)}get progress(){return this._progress}get stem(){return this._stem}get leaf(){return this._leaf}get flower(){return this._flower}get foliage(){return this._foliage}get plume(){return this._plume}get isActive(){return this._progress>0}get isComplete(){return this._progress>=1}get hasLeaves(){return this._leaf>0}get hasFlower(){return this._flower>0}get hasFoliage(){return this._foliage>0}get hasPlume(){return this._plume>0}toObject(){return{progress:this._progress,stem:this._stem,leaf:this._leaf,flower:this._flower}}toExtendedObject(){return{progress:this._progress,stem:this._stem,leaf:this._leaf,flower:this._flower,foliage:this._foliage,plume:this._plume}}isInRange(e,i){return this._progress>=e&&this._progress<i}getPhaseProgress(e,i){return this._progress<=e?0:this._progress>=i?1:(this._progress-e)/(i-e)}eased(e="linear"){let i=this._progress;switch(e){case"ease-in":return i*i;case"ease-out":return i*(2-i);case"ease-in-out":return i<.5?2*i*i:-1+(4-2*i)*i;default:return i}}easedStem(e="ease-out"){return this._applyEasing(this._stem,e)}easedFlower(e="ease-out"){return this._applyEasing(this._flower,e)}_applyEasing(e,i){let r=e;switch(i){case"ease-in":return r*r;case"ease-out":return r*(2-r);case"ease-in-out":return r<.5?2*r*r:-1+(4-2*r)*r;default:return r}}equals(e){return this._progress===e._progress&&this._stem===e._stem&&this._leaf===e._leaf&&this._flower===e._flower&&this._foliage===e._foliage&&this._plume===e._plume}approximatelyEquals(e,i=1e-4){return Math.abs(this._progress-e._progress)<i&&Math.abs(this._stem-e._stem)<i&&Math.abs(this._leaf-e._leaf)<i&&Math.abs(this._flower-e._flower)<i&&Math.abs(this._foliage-e._foliage)<i&&Math.abs(this._plume-e._plume)<i}clone(){return k.fromProgress(this._progress)}toString(){return`GrowthProgress(${this._progress.toFixed(2)}: stem=${this._stem.toFixed(2)}, leaf=${this._leaf.toFixed(2)}, flower=${this._flower.toFixed(2)})`}};k.defaultConfig={stemRate:F.STEM_GROWTH_RATE,leafStart:F.LEAF_START,leafRate:F.LEAF_GROWTH_RATE,flowerStart:F.FLOWER_START,flowerRate:F.FLOWER_GROWTH_RATE};var Q=k;function Qe(t,e,i){let r=(t-e)/i;return r<=0?null:{progress:r,stem:Math.min(1,r*F.STEM_GROWTH_RATE),leaf:Math.max(0,Math.min(1,(r-F.LEAF_START)*F.LEAF_GROWTH_RATE)),flower:Math.max(0,Math.min(1,(r-F.FLOWER_START)*F.FLOWER_GROWTH_RATE))}}function et(t,e){return t>=e}function tt(t,e,i){return Math.max(0,Math.min(1,(t-e)/i))}var ni=1024,si=2,oi=8192,li=16384,ai=.25,ui=60,hi=10,q=class{constructor(){this.progress=0;this.stem=0;this.leaf=0;this.flower=0;this.foliage=0;this.plume=0}reset(){return this.progress=0,this.stem=0,this.leaf=0,this.flower=0,this.foliage=0,this.plume=0,this._frameAcquired!==void 0&&(this._released=!0,this._frameAcquired=-1,this._acquireStack=void 0),this}calculateMut(e,i,r,n=Q.defaultConfig){let s=(e-i)/r;return this.progress=Math.max(0,Math.min(1,s)),this.stem=Math.min(1,this.progress*n.stemRate),this.leaf=Math.max(0,Math.min(1,(this.progress-n.leafStart)*n.leafRate)),this.flower=Math.max(0,Math.min(1,(this.progress-n.flowerStart)*n.flowerRate)),this.foliage=Math.max(0,Math.min(1,(this.progress-F.FOLIAGE_START)*F.FOLIAGE_GROWTH_RATE)),this.plume=this.progress>F.PLUME_START?(this.progress-F.PLUME_START)/(1-F.PLUME_START):0,this}get isActive(){return this.progress>0}get isComplete(){return this.progress>=1}get hasLeaves(){return this.leaf>0}get hasFlower(){return this.flower>0}get hasFoliage(){return this.foliage>0}get hasPlume(){return this.plume>0}},K=class{constructor(e={}){this.pool=[];this.poolMembers=new WeakSet;this.acquireIndex=0;this.frameNumber=0;this.inFrame=!1;this.peakUsage=0;this.growthEvents=0;this.totalAcquired=0;this.totalReleased=0;this.consecutiveLowUsageFrames=0;this.frameHistory=[];this.maxHistorySize=ui;this.initialSize=Math.max(1,Math.min(1e6,e.initialSize??ni));let i=!1;typeof process<"u"&&process?.env?.NODE_ENV!=="production"&&(i=!0),this.devMode=e.devMode??i,this.strictMode=e.strictMode??this.devMode,this.growthFactor=Math.max(1.1,Math.min(4,e.growthFactor??si)),this.maxSizeWarning=Math.max(1,Math.min(1e6,e.maxSizeWarning??oi)),this.maxSize=Math.max(1,Math.min(1e6,e.maxSize??li)),this.shrinkThreshold=Math.max(.01,Math.min(.99,e.shrinkThreshold??ai)),this.lowUsageFramesBeforeShrink=Math.max(1,Math.min(1e4,e.lowUsageFramesBeforeShrink??hi)),this.pool=new Array(this.initialSize);for(let r=0;r<this.initialSize;r++)this.pool[r]=new q,this.poolMembers.add(this.pool[r])}beginFrame(){if(this.inFrame){let e="GrowthProgressPool: beginFrame() called while already in frame. Did you forget endFrame()?";if(this.devMode&&console.warn(e),this.strictMode)throw new Error(e);this.acquireIndex=0}this.frameNumber++,this.inFrame=!0,this.acquireIndex=0}endFrame(){if(!this.inFrame){let i="GrowthProgressPool: endFrame() called outside of frame";if(this.devMode&&console.warn(i),this.strictMode)throw new Error(i);return}let e=this.acquireIndex;e>this.peakUsage&&(this.peakUsage=e),this.totalReleased+=e,this.frameHistory.push({frameNumber:this.frameNumber,usage:e,timestamp:Date.now()}),this.frameHistory.length>this.maxHistorySize&&this.frameHistory.shift();for(let i=0;i<this.acquireIndex;i++)this.pool[i].reset();this.inFrame=!1,this.maybeShrink(e)}acquire(){if(!this.inFrame){let i="GrowthProgressPool: acquire() called outside of frame. Call beginFrame() first.";if(this.devMode||this.strictMode)throw new Error(i);this.beginFrame()}this.acquireIndex>=this.pool.length&&this.grow();let e=this.pool[this.acquireIndex];return this.devMode&&(e._frameAcquired=this.frameNumber,e._released=!1),this.acquireIndex++,this.totalAcquired++,e}acquireAndCalculate(e,i,r,n){return this.acquire().calculateMut(e,i,r,n)}grow(){let e=this.pool.length,i=Math.floor(e*this.growthFactor);if(i>this.maxSize)throw new Error(`GrowthProgressPool: Maximum size ${this.maxSize} exceeded. This indicates a leak or unexpectedly high plant count.`);this.devMode&&i>this.maxSizeWarning&&console.warn(`GrowthProgressPool: Pool grew to ${i} objects. This may indicate a leak or unexpectedly high plant count.`);for(let r=e;r<i;r++){let n=new q;this.pool.push(n),this.poolMembers.add(n)}this.growthEvents++,this.consecutiveLowUsageFrames=0}maybeShrink(e){if(this.pool.length<=this.initialSize){this.consecutiveLowUsageFrames=0;return}e/this.pool.length<this.shrinkThreshold?(this.consecutiveLowUsageFrames++,this.consecutiveLowUsageFrames>=this.lowUsageFramesBeforeShrink&&this.shrink()):this.consecutiveLowUsageFrames=0}shrink(){let e=Math.max(this.initialSize,Math.floor(this.pool.length/this.growthFactor));e>=this.pool.length||(this.pool.length=e,this.consecutiveLowUsageFrames=0)}getStats(){return{poolSize:this.pool.length,acquired:this.totalAcquired,released:this.totalReleased,peakUsage:this.peakUsage,growthEvents:this.growthEvents,currentFrameUsage:this.acquireIndex}}getFrameHistory(){return this.frameHistory}detectLeaks(){if(!this.devMode)return[];let e=[];for(let i=0;i<this.pool.length;i++){let r=this.pool[i];r._released===!1&&r._frameAcquired!==void 0&&r._frameAcquired<this.frameNumber&&e.push({frameAcquired:r._frameAcquired,acquireStack:r._acquireStack})}return e}validateObject(e){if(!this.devMode)return!0;if(!this.poolMembers.has(e))throw new Error("GrowthProgressPool: Object is not from this pool");if(e._released){let i=new Error().stack;throw new Error(`GrowthProgressPool: Use-after-release detected. Object was acquired at frame ${e._frameAcquired??"unknown"}, current frame is ${this.frameNumber}.
Validation location:
${i}`)}if(e._frameAcquired!==this.frameNumber)throw new Error(`GrowthProgressPool: Stale object detected. Object from frame ${e._frameAcquired??"unknown"} used in frame ${this.frameNumber}.`);return!0}reset(){this.pool.length>this.initialSize&&(this.pool.length=this.initialSize);for(let e=0;e<this.initialSize;e++){if(!this.pool[e]){let i=new q;this.pool[e]=i,this.poolMembers.add(i)}this.pool[e].reset()}this.acquireIndex=0,this.frameNumber=0,this.inFrame=!1,this.peakUsage=0,this.growthEvents=0,this.totalAcquired=0,this.totalReleased=0,this.consecutiveLowUsageFrames=0,this.frameHistory=[]}getFrameNumber(){return this.frameNumber}isInFrame(){return this.inFrame}},fe=null;function ge(){return fe??(fe=new K)}function it(){fe&&fe.reset()}function rt(){fe=null}function O(t,e,i,r){return(t-e)/i<=0?null:(r??ge()).acquireAndCalculate(t,e,i)}function N(t,e,i,r,n,s){let a=O(r,t.delay,t.growDuration,s);return a?{x:t.x*e,baseY:i,plantHeight:t.maxHeight*i*n.heightMultiplier,phases:a}:null}function B(t,e,i,r,n,s,a,o){if(o<=0)return null;let l=r*Math.min(1,o);t.beginPath(),t.moveTo(e,i);let h=e+a*l*.3,m=i-l*.4,u=e+a*l*.6,p=i-l*.7,d=e+a*l,f=i-l;return t.bezierCurveTo(h,m,u,p,d,f),t.strokeStyle=s,t.lineWidth=n,t.lineCap="round",t.stroke(),{x:d,y:f}}function v(t,e,i,r,n,s){n<1||(t.save(),t.translate(e,i),t.rotate(r),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),t.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),t.fillStyle=s,t.fill(),t.restore())}function re(t,e,i,r,n,s,a,o){if(a<=0)return;let l=r*a*o.sizeMultiplier,h=Math.max(3,s+o.petalCountModifier);for(let m=0;m<h;m++){let u=m/h*Math.PI*2;t.save(),t.translate(e,i),t.rotate(u),t.beginPath(),t.ellipse(l*.5,0,l*.5,l*.25,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,l*.25,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function ci(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier;t.beginPath(),t.moveTo(e-o*.3,i),t.bezierCurveTo(e-o*.4,i-o*.5,e-o*.2,i-o*.9,e,i-o),t.bezierCurveTo(e+o*.2,i-o*.9,e+o*.4,i-o*.5,e+o*.3,i),t.bezierCurveTo(e+o*.1,i-o*.2,e-o*.1,i-o*.2,e-o*.3,i),t.fillStyle=n,t.fill(),a.complexity>.6&&(t.globalAlpha=.3,t.beginPath(),t.moveTo(e,i-o*.2),t.lineTo(e,i-o*.9),t.strokeStyle="#FFFFFF",t.lineWidth=o*.08,t.stroke(),t.globalAlpha=1)}function mi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=Math.max(8,12+a.petalCountModifier);for(let h=0;h<l;h++){let m=h/l*Math.PI*2;t.save(),t.translate(e,i),t.rotate(m),t.beginPath(),t.ellipse(o*.45,0,o*.4,o*.12,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,o*.22,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function pi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=Math.max(3,5+a.petalCountModifier);for(let h=0;h<l;h++){let m=h/l*Math.PI*2+.3,u=o*.3,p=e+Math.cos(m)*u,d=i+Math.sin(m)*u;t.beginPath(),t.arc(p,d,o*.18,0,Math.PI*2),t.fillStyle=n,t.fill()}t.beginPath(),t.arc(e,i,o*.15,0,Math.PI*2),t.fillStyle=n,t.fill()}function di(t,e,i,r,n,s,a,o){if(a<=0)return;let l=r*Math.min(1,a)*o.heightMultiplier,h=1.5*o.thicknessMultiplier,m=Math.max(2,3+Math.floor(D(s)*3)+o.petalCountModifier);for(let u=0;u<m;u++){let p=D(s+u*10),d=(p-.5)*.4*o.leanMultiplier,f=l*(.6+p*.4);t.beginPath(),t.moveTo(e+(u-m/2)*3,i),t.quadraticCurveTo(e+(u-m/2)*3+d*f,i-f*.6,e+(u-m/2)*3+d*f*1.5,i-f),t.strokeStyle=n,t.lineWidth=h,t.lineCap="round",t.stroke()}if(o.complexity>.7&&a>.8){let u=(a-.8)/.2;t.globalAlpha=u*.7;for(let p=0;p<m;p++){let d=D(s+p*10),f=(d-.5)*.4*o.leanMultiplier,M=l*(.6+d*.4),w=e+(p-m/2)*3+f*M*1.5,b=i-M;t.beginPath(),t.ellipse(w,b-l*.1,l*.08,l*.15,0,0,Math.PI*2),t.fillStyle="#F5F5DC",t.fill()}t.globalAlpha=1}}function fi(t,e,i,r,n,s,a,o){if(a<=0)return;let l=r*Math.min(1,a)*o.heightMultiplier,h=(D(s)-.5)*.3*o.leanMultiplier,m=1.5*o.thicknessMultiplier;t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(e+h*l*.5,i-l*.5,e+h*l,i-l),t.strokeStyle=n,t.lineWidth=m,t.stroke();let u=Math.max(4,6+o.petalCountModifier);for(let p=0;p<u;p++){let d=(p+1)/(u+1),f=e+h*l*d,M=i-l*d,w=p%2===0?1:-1,b=l*.25*(1-d*.5),S=o.complexity>.7?.5:.2;t.beginPath(),t.moveTo(f,M),t.quadraticCurveTo(f+w*b*.7,M-b*S,f+w*b,M+b*S),t.strokeStyle=n,t.lineWidth=1,t.stroke()}}function gi(t,e,i,r,n,s,a,o,l){if(o<=0)return;let h=r*Math.min(1,o)*l.sizeMultiplier,m=Math.max(5,8+l.petalCountModifier);for(let p=0;p<m;p++){let d=D(a+p*7),f=p/m*Math.PI*2+d*.5,M=h*(.3+d*.4),w=e+Math.cos(f)*M*l.leanMultiplier,b=i-h*.3+Math.sin(f)*M*.5;v(t,w,b,f+Math.PI,h*.4,n)}let u=l.complexity>.8?.5:.7;if(o>u){let p=(o-u)/(1-u),d=l.complexity>.8?5:3;for(let f=0;f<d;f++){let M=D(a+f*13),w=e+(M-.5)*h*.6,b=i-h*.3-M*h*.3;t.beginPath(),t.arc(w,b,h*.12*p,0,Math.PI*2),t.fillStyle=s,t.fill()}}}function bi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=a.complexity>.8?4:3;for(let h=0;h<l;h++){let m=o*(1-h*.2),u=5+h,p=h*.3;for(let d=0;d<u;d++){let f=d/u*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(f),t.beginPath(),t.ellipse(m*.35,0,m*.4,m*.25,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,o*.15,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function Mi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=Math.max(4,6+a.petalCountModifier);for(let h=0;h<l;h++){let m=h/l*Math.PI*2;t.save(),t.translate(e,i),t.rotate(m),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(o*.2,-o*.3,o*.6,-o*.2,o*.8,0),t.bezierCurveTo(o*.6,o*.15,o*.2,o*.1,0,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,o*.12,0,Math.PI*2),t.fillStyle="#8B4513",t.fill()}function wi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier;for(let l=0;l<3;l++){let h=l/3*Math.PI*2-Math.PI/2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.ellipse(o*.5,0,o*.5,o*.15,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}for(let l=0;l<2;l++){let h=(l===0?-.4:.4)+Math.PI/2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.ellipse(o*.35,0,o*.35,o*.2,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.ellipse(e,i+o*.3,o*.25,o*.15,0,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function yi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=a.complexity>.6?4:3,h=Math.max(3,6+a.petalCountModifier);for(let m=0;m<l;m++){let u=o*(1-m*.2),p=m*.5;for(let d=0;d<h;d++){let f=d/h*Math.PI*2+p,M=e+Math.cos(f)*u*.4,w=i-m*o*.1+Math.sin(f)*u*.2;t.beginPath(),t.ellipse(M,w,u*.2,u*.35,f,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function Ci(t,e,i,r,n,s,a,o){if(a<=0)return;let l=r*Math.min(1,a)*o.heightMultiplier,h=(D(s)-.5)*.2*o.leanMultiplier;if(t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(e+h*l*.5,i-l*.5,e+h*l,i-l),t.strokeStyle="#4A7C40",t.lineWidth=1.5*o.thicknessMultiplier,t.stroke(),a>.5){let m=(a-.5)/.5,u=l*.3*m,p=i-l+u/2,d=e+h*l,f=Math.floor(8*m);for(let M=0;M<f;M++){let w=p-M/f*u,b=d+(D(s+M)-.5)*4;t.beginPath(),t.arc(b,w,2.5,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function Si(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier;for(let l=0;l<4;l++){let h=l/4*Math.PI*2+Math.PI/4;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(o*.2,-o*.3,o*.5,-o*.2,o*.6,0),t.bezierCurveTo(o*.5,o*.2,o*.2,o*.3,0,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,o*.2,0,Math.PI*2),t.fillStyle="#2D2D2D",t.fill()}function Ei(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=Math.max(8,16+a.petalCountModifier);for(let h=0;h<l;h++){let m=h/l*Math.PI*2;t.save(),t.translate(e,i),t.rotate(m),t.beginPath(),t.moveTo(o*.3,0),t.bezierCurveTo(o*.4,-o*.08,o*.7,-o*.05,o*.85,0),t.bezierCurveTo(o*.7,o*.05,o*.4,o*.08,o*.3,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,o*.35,0,Math.PI*2),t.fillStyle="#4A3728",t.fill(),t.beginPath(),t.arc(e,i,o*.25,0,Math.PI*2),t.fillStyle="#3D2D20",t.fill()}function xi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier;for(let l=0;l<3;l++){let h=l/3*Math.PI*2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(o*.1,-o*.4,o*.2,-o*.6,0,-o*.7),t.bezierCurveTo(-o*.2,-o*.6,-o*.1,-o*.4,0,0),t.fillStyle=n,t.fill(),t.restore()}for(let l=0;l<3;l++){let h=l/3*Math.PI*2+Math.PI/3;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(o*.3,o*.2,o*.4,o*.5,o*.2,o*.6),t.bezierCurveTo(0,o*.5,-o*.1,o*.2,0,0),t.fillStyle=n,t.fill(),t.restore()}}function Fi(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=5;for(let h=0;h<l;h++){let m=o*(1-h*.15),u=8+h*2,p=h*.4;for(let d=0;d<u;d++){let f=d/u*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(f),t.beginPath(),t.ellipse(m*.3,0,m*.35,m*.2,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,o*.12,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function vi(t,e,i,r,n,s,a,o){if(a<=0)return;let l=r*a*o.sizeMultiplier,h=Math.max(8,20+o.petalCountModifier);for(let m=0;m<h;m++){let u=D(s+m*7),p=D(s+m*11),d=u*Math.PI*2,f=p*l*.4,M=e+Math.cos(d)*f,w=i+Math.sin(d)*f*.6-l*.1;for(let b=0;b<4;b++){let S=b/4*Math.PI*2;t.beginPath(),t.ellipse(M+Math.cos(S)*l*.06,w+Math.sin(S)*l*.06,l*.05,l*.03,S,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function Ti(t,e,i,r,n,s,a){if(s<=0)return;let o=r*s*a.sizeMultiplier,l=4;for(let h=0;h<l;h++){let m=o*(1-h*.18),u=Math.max(4,10+h*2+a.petalCountModifier),p=h*.25;for(let d=0;d<u;d++){let f=d/u*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(f),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(m*.15,-m*.08,m*.35,-m*.05,m*.45,0),t.bezierCurveTo(m*.35,m*.05,m*.15,m*.08,0,0),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,o*.08,0,Math.PI*2),t.fillStyle="#DAA520",t.fill()}var Ri={0:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,2*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.4*u.stem,f=l+e.lean*s.leanMultiplier*m*.4;v(t,f-3,d,-.5-e.lean,15*e.scale*u.leaf,e.leafColor),v(t,f+3,d+5,.5-e.lean,12*e.scale*u.leaf,e.leafColor)}p&&u.flower>0&&re(t,p.x,p.y,18*e.scale,e.flowerColor,e.petals,u.flower,s)},1:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*.5*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.2*u.stem;v(t,l-2,d,-.8,25*e.scale*u.leaf,e.leafColor),v(t,l+2,d,.8,22*e.scale*u.leaf,e.leafColor)}p&&u.flower>0&&ci(t,p.x,p.y,22*e.scale,e.flowerColor,u.flower,s)},2:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.3*u.stem,f=l+e.lean*s.leanMultiplier*m*.3;v(t,f,d,-.3,12*e.scale*u.leaf,e.leafColor)}p&&u.flower>0&&mi(t,p.x,p.y,16*e.scale,e.flowerColor,u.flower,s)},3:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m*.85,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);p&&u.flower>0&&pi(t,p.x,p.y,14*e.scale,e.flowerColor,u.flower,s)},4:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r,u=o.stem;di(t,l,h,m,e.leafColor,e.seed,u,s)},5:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r,u=o.stem;fi(t,l,h,m,e.leafColor,e.seed,u,s)},6:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r,u=Math.min(1,o.progress*1.2);gi(t,l,h-5,m*.7,e.leafColor,e.flowerColor,e.seed,u,s)},7:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.4*u.stem;v(t,l-4,d,-.6,18*e.scale*u.leaf,e.leafColor),v(t,l+4,d+8,.6,16*e.scale*u.leaf,e.leafColor)}p&&u.flower>0&&bi(t,p.x,p.y,20*e.scale,e.flowerColor,u.flower,s)},8:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,2*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.3*u.stem;v(t,l-2,d,-.4,20*e.scale*u.leaf,e.leafColor),v(t,l+2,d+10,.4,18*e.scale*u.leaf,e.leafColor)}p&&u.flower>0&&Mi(t,p.x,p.y,22*e.scale,e.flowerColor,u.flower,s)},9:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);p&&u.flower>0&&wi(t,p.x,p.y,18*e.scale,e.flowerColor,u.flower,s)},10:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r,u=Math.min(1,o.progress*1.2);yi(t,l,h-5,m*.6,e.leafColor,u,s)},11:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r,u=Math.min(1,o.progress*1.3);Ci(t,l,h,m,e.flowerColor,e.seed,u,s)},12:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(p&&u.leaf>0){let d=h-m*.35*u.stem;v(t,l-3,d,-.5,16*e.scale*u.leaf,e.leafColor),v(t,l+3,d+6,.5,14*e.scale*u.leaf,e.leafColor)}if(p&&u.flower>0)switch(e.type){case"poppy":Si(t,p.x,p.y,18*e.scale,e.flowerColor,u.flower,s);break;case"sunflower":Ei(t,p.x,p.y,25*e.scale,e.flowerColor,u.flower,s);break;case"iris":xi(t,p.x,p.y,20*e.scale,e.flowerColor,u.flower,s);break;case"peony":Fi(t,p.x,p.y,22*e.scale,e.flowerColor,u.flower,s);break;case"hydrangea":vi(t,p.x,p.y,28*e.scale,e.flowerColor,e.seed,u.flower,s);break;case"dahlia":Ti(t,p.x,p.y,24*e.scale,e.flowerColor,u.flower,s);break;default:re(t,p.x,p.y,18*e.scale,e.flowerColor,e.petals,u.flower,s)}},13:(t,e,i,r,n,s,a)=>{let o=N(e,i,r,n,s,a);if(!o)return;let{x:l,baseY:h,plantHeight:m,phases:u}=o,p=B(t,l,h,m,3*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier*.5,u.stem);if(u.leaf>0){let d=3+Math.floor(s.complexity*3);for(let f=0;f<d;f++){let M=.2+f/d*.5,w=h-m*M*u.stem,b=l+e.lean*s.leanMultiplier*m*M*.5,S=f%2===0?-1:1;v(t,b,w,S*.6,20*e.scale*u.leaf,e.leafColor)}}if(p&&u.flower>0){let d=4+Math.floor(s.complexity*4);for(let f=0;f<d;f++){let M=.5+f/d*.45,w=h-m*M*u.stem,b=l+e.lean*s.leanMultiplier*m*M*.5,S=(8+f*1.5)*e.scale*s.sizeMultiplier,g=Math.max(0,(u.flower-f*.08)*1.5);g>0&&re(t,b,w,S,e.flowerColor,e.petals,Math.min(1,g),s)}}},14:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o.progress*1.3),p=2+Math.floor(s.complexity*3),d=I(e.seed);for(let f=0;f<p;f++){let M=(d()-.5)*20*s.sizeMultiplier,w=m*(.7+d()*.3)*u,b=(d()-.5)*.15*s.leanMultiplier,S=4+Math.floor(d()*4),g=w/S;t.strokeStyle=e.stemColor,t.lineWidth=3*e.scale*s.thicknessMultiplier,t.lineCap="round";let y=h,x=l+M;for(let A=0;A<S;A++){let R=y-g,G=x+b*g;t.beginPath(),t.moveTo(x,y),t.lineTo(G,R),t.stroke(),A<S-1&&(t.beginPath(),t.arc(G,R,4*e.scale,0,Math.PI*2),t.fillStyle=e.stemColor,t.fill()),y=R,x=G}if(u>.5){let A=(u-.5)*2;for(let R=0;R<3;R++){let G=(R-1)*.4+b;v(t,x,y,G,30*e.scale*A,e.leafColor)}}}},15:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o.progress*1.2),p=I(e.seed);t.strokeStyle=e.stemColor,t.lineWidth=2*e.scale*s.thicknessMultiplier,t.lineCap="round",t.beginPath(),t.moveTo(l,h);let d=8,f=l,M=h;for(let w=1;w<=d;w++){let b=w/d,S=h-m*b*u,g=Math.sin(b*Math.PI*3)*15*s.leanMultiplier,y=l+g+e.lean*m*b*.3;if(t.quadraticCurveTo((f+y)/2+(p()-.5)*10,(M+S)/2,y,S),b>.1&&u>b){let x=12*e.scale*Math.min(1,(u-b)*3);w%2===0?v(t,y-5,S,-.8,x,e.leafColor):v(t,y+5,S,.8,x,e.leafColor)}f=y,M=S}if(t.stroke(),u>.6&&s.complexity>.6){let w=(u-.6)*2.5,b=Math.max(1,3+Math.floor(s.petalCountModifier));for(let S=0;S<b;S++){let g=.3+p()*.5,y=h-m*g*u,x=l+Math.sin(g*Math.PI*3)*15*s.leanMultiplier+e.lean*m*g*.3;re(t,x,y,10*e.scale,e.flowerColor,5,Math.min(1,w),s)}}},16:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o.progress*1.2),p=o.foliage,d=I(e.seed),f=m*.6*u,M=6*e.scale*s.thicknessMultiplier;if(t.fillStyle=e.stemColor,t.beginPath(),t.moveTo(l-M/2,h),t.lineTo(l+M/2,h),t.lineTo(l+M/4,h-f),t.lineTo(l-M/4,h-f),t.closePath(),t.fill(),p>0){let w=h-f,b=25*e.scale*s.sizeMultiplier*p,S=5+Math.floor(s.complexity*4);for(let g=0;g<S;g++){let y=g/S*Math.PI*2+d()*.5,x=b*(.4+d()*.6),A=l+Math.cos(y)*x*.8,R=w-Math.abs(Math.sin(y))*x*.6-b*.3,G=b*(.4+d()*.3);t.beginPath(),t.arc(A,R,G,0,Math.PI*2),t.fillStyle=e.leafColor,t.fill()}if(s.petalCountModifier>4&&p>.5){let g=Math.max(1,Math.floor(s.petalCountModifier));for(let y=0;y<g;y++){let x=d()*Math.PI*2,A=b*(.5+d()*.5),R=l+Math.cos(x)*A*.8,G=w-Math.abs(Math.sin(x))*A*.6-b*.3;re(t,R,G,6*e.scale,e.flowerColor,5,p,s)}}}},17:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o.progress*1.2),p=I(e.seed),d=m*.5*u;if(t.strokeStyle=e.stemColor,t.lineWidth=5*e.scale*s.thicknessMultiplier,t.lineCap="round",t.beginPath(),t.moveTo(l,h),t.lineTo(l+e.lean*d*.3,h-d),t.stroke(),u>.3){let f=(u-.3)*1.4,M=5+Math.floor(s.complexity*3),w=h-d,b=l+e.lean*d*.3;for(let S=0;S<M;S++){let g=S/M*Math.PI-Math.PI/2+(p()-.5)*.3,y=35*e.scale*s.sizeMultiplier*f,x=.3+p()*.3;t.strokeStyle=e.leafColor,t.lineWidth=2*e.scale,t.beginPath(),t.moveTo(b,w);let A=b+Math.cos(g)*y,R=w+Math.sin(g)*y*.5+y*x,G=b+Math.cos(g)*y*.6,xe=w+Math.sin(g)*y*.3;t.quadraticCurveTo(G,xe,A,R),t.stroke();let ae=6;for(let W=1;W<ae;W++){let T=W/ae,X=b+(A-b)*T*.8,Fe=w+(R-w)*T*.5+y*x*T*T,ve=8*e.scale*(1-T*.5)*f;v(t,X,Fe,g+(W%2===0?.5:-.5),ve,e.leafColor)}}}},18:(t,e,i,r,n,s,a)=>{let o=O(n,e.delay,e.growDuration,a);if(!o)return;let l=e.x*i,h=r,m=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o.progress*1.2),p=m*u,d=4*e.scale*s.thicknessMultiplier;if(t.fillStyle=e.stemColor,t.beginPath(),t.moveTo(l-d/2,h),t.lineTo(l+d/2,h),t.lineTo(l+d/4,h-p),t.lineTo(l-d/4,h-p),t.closePath(),t.fill(),u>.2){let f=(u-.2)*1.25,M=4+Math.floor(s.complexity*3),w=20*e.scale*s.sizeMultiplier;t.fillStyle=e.leafColor;for(let b=0;b<M;b++){let S=b/M,g=h-p*(.2+S*.75),y=w*(1-S*.7)*f,x=m*.15*(1-S*.3);t.beginPath(),t.moveTo(l,g-x),t.lineTo(l-y,g),t.lineTo(l+y,g),t.closePath(),t.fill()}}}};function He(t,e,i,r,n,s){let a=e.category??ie(e.type),o=e.variation??Y(e.type),l=Ri[a];if(!l){console.warn(`Garten: No renderer for category ${a}`);return}l(t,e,i,r,n,o,s)}var ne=class{constructor(e){this.resizeObserver=null;this.resizeHandler=null;this.debouncedResize=null;this.dpr=1;this.width=0;this.height=0;this.options=e,this.container=e.container,this.pool=new K,this.canvas=document.createElement("canvas"),this.canvas.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: ${e.zIndex};
      opacity: ${e.opacity};
    `,this.canvas.setAttribute("aria-hidden","true"),this.canvas.setAttribute("role","presentation");let i=this.canvas.getContext("2d");if(!i)throw new Error("Garten: Could not create 2D canvas context. Check that browser supports the Canvas API.");this.ctx=i,this.setupContainer(),this.container.insertBefore(this.canvas,this.container.firstChild),this.resize(),this.setupResizeObserver()}setupContainer(){window.getComputedStyle(this.container).position==="static"&&(this.container.style.position="relative")}setupResizeObserver(){this.debouncedResize=Xe(()=>this.resize(),100),typeof ResizeObserver<"u"?(this.resizeObserver=new ResizeObserver(this.debouncedResize),this.resizeObserver.observe(this.container)):(this.resizeHandler=this.debouncedResize,window.addEventListener("resize",this.resizeHandler))}resize(){this.dpr=Ke(this.options.maxPixelRatio);let e=this.container.getBoundingClientRect();this.width=e.width,this.height=e.height,!(this.width<=0||this.height<=0)&&(this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.dpr,this.dpr))}clear(){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.width,this.height)}drawGround(){this.ctx.fillStyle="rgba(139, 119, 101, 0.08)",this.ctx.fillRect(0,this.height-8,this.width,8)}applyVerticalFade(){let{fadeHeight:e,fadeColor:i,maxHeight:r}=this.options;if(e<=0)return;let n=me(i);if(!n)return;let s=this.height*(1-r),a=s,o=Math.max(0,s-this.height*e),l=this.ctx.createLinearGradient(0,o,0,a);l.addColorStop(0,`rgba(${n.r}, ${n.g}, ${n.b}, 1)`),l.addColorStop(1,`rgba(${n.r}, ${n.g}, ${n.b}, 0)`),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=l,this.ctx.fillRect(0,0,this.width,a),this.ctx.globalCompositeOperation="source-over"}render(e,i){this.pool.beginFrame();try{this.clear(),this.drawGround();for(let r of e)i<r.delay||He(this.ctx,r,this.width,this.height,i,this.pool);this.applyVerticalFade()}finally{this.pool.endFrame()}}renderStatic(e,i){let r=i*this.options.duration;this.render(e,r)}getDimensions(){return{width:this.width,height:this.height}}getCanvas(){return this.canvas}setOptions(e){this.options=e,this.canvas.style.zIndex=String(e.zIndex),this.canvas.style.opacity=String(e.opacity),this.resize()}destroy(){this.debouncedResize&&(this.debouncedResize.cancel(),this.debouncedResize=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.pool.reset(),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};var se=class{constructor(e){this.plants=[];this.state="idle";this.animationId=null;this.startTime=0;this.pausedAt=0;this.elapsedTime=0;this.speed=1;this.lastFrameTime=0;this.lastReportedGeneration=-1;this.tick=e=>{if(this.state!=="playing")return;if(e-this.lastFrameTime<this.frameInterval){this.animationId=requestAnimationFrame(this.tick);return}this.lastFrameTime=e;let i=this.elapsedTime;this.elapsedTime=(e-this.startTime)*this.speed/1e3;let r=Oe(i,this.elapsedTime,this.options.duration,this.options.generations);r!==null&&r>this.lastReportedGeneration&&(this.lastReportedGeneration=r,this.options.events.onGenerationComplete?.(r,this.options.generations));let n=Math.min(1,this.elapsedTime/this.options.duration);this.options.events.onProgress?.(n,this.elapsedTime);let s=Math.min(this.elapsedTime,this.options.duration);if(this.renderer.render(this.plants,s),this.elapsedTime>=this.options.duration)if(this.options.loop)this.startTime=e,this.elapsedTime=0,this.lastReportedGeneration=-1;else{this.state="complete",this.emitStateChange(),this.options.events.onComplete?.();return}this.animationId=requestAnimationFrame(this.tick)};if(this.options=Ae(e),this.speed=this.options.speed,this.frameInterval=1e3/this.options.targetFPS,this.options.respectReducedMotion&&qe()){this.handleReducedMotion();return}this.renderer=new ne(this.options),this.plants=te(this.options),this.options.autoplay&&this.play()}handleReducedMotion(){this.renderer=new ne(this.options),this.plants=te(this.options),this.renderer.renderStatic(this.plants,1),this.state="complete",this.emitStateChange()}emitStateChange(){this.options.events.onStateChange?.(this.state)}play(){this.state!=="playing"&&(this.state==="paused"?this.startTime=performance.now()-this.pausedAt*1e3/this.speed:(this.startTime=performance.now(),this.elapsedTime=0,this.lastReportedGeneration=-1),this.state="playing",this.emitStateChange(),this.lastFrameTime=performance.now(),this.animationId=requestAnimationFrame(this.tick))}pause(){this.state==="playing"&&(this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.pausedAt=this.elapsedTime,this.state="paused",this.emitStateChange())}stop(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.elapsedTime=0,this.pausedAt=0,this.lastReportedGeneration=-1,this.state="idle",this.emitStateChange(),this.renderer.render(this.plants,0)}seek(e){let i=Math.max(0,Math.min(e,this.options.duration));this.state==="playing"?this.startTime=performance.now()-i*1e3/this.speed:this.pausedAt=i,this.elapsedTime=i;let r=this.options.generations>0?Math.floor(i/(this.options.duration/this.options.generations)):0;this.lastReportedGeneration=r-1,this.renderer.render(this.plants,i),i>=this.options.duration&&!this.options.loop&&(this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.state="complete",this.emitStateChange(),this.options.events.onComplete?.())}setSpeed(e){if(e<=0)throw new Error("Garten: Speed must be positive");let i=this.state==="playing";i&&this.pause(),this.speed=e,i&&this.play()}getState(){return this.state}getProgress(){return Math.min(1,this.elapsedTime/this.options.duration)}getElapsedTime(){return this.elapsedTime}setOptions(e){let i=e.generations!==void 0||e.density!==void 0||e.maxHeight!==void 0||e.colors!==void 0||e.seed!==void 0||e.categories!==void 0||e.timingCurve!==void 0||e.duration!==void 0,r=e.colors?{accent:this.options.colors.accent,palette:this.options.colors.palette,accentWeight:this.options.colors.accentWeight,flowerColors:this.options.colors.flowerColors,foliageColors:this.options.colors.foliageColors,...e.colors}:void 0;this.options=Ae({container:this.options.container,duration:this.options.duration,generations:this.options.generations,maxHeight:this.options.maxHeight,density:this.options.density,categories:this.options.categories??void 0,seed:this.options.seed,timingCurve:this.options.timingCurve,opacity:this.options.opacity,zIndex:this.options.zIndex,loop:this.options.loop,speed:this.options.speed,autoplay:this.options.autoplay,respectReducedMotion:this.options.respectReducedMotion,maxPixelRatio:this.options.maxPixelRatio,targetFPS:this.options.targetFPS,fadeHeight:this.options.fadeHeight,fadeColor:this.options.fadeColor,events:this.options.events,colors:{accent:this.options.colors.accent,palette:this.options.colors.palette,accentWeight:this.options.colors.accentWeight,flowerColors:this.options.colors.flowerColors,foliageColors:this.options.colors.foliageColors},...e,...r?{colors:r}:{}}),this.renderer.setOptions(this.options),e.duration!==void 0&&(this.pausedAt=Math.min(this.pausedAt,this.options.duration),this.elapsedTime=Math.min(this.elapsedTime,this.options.duration)),i&&this.regenerate(),e.speed!==void 0&&this.setSpeed(e.speed)}regenerate(){let e=this.state==="playing";e&&this.pause(),this.plants=te(this.options);let i=this.options.duration/this.options.generations,r=i>0?Math.floor(this.elapsedTime/i):0;this.lastReportedGeneration=Math.min(r,this.options.generations)-1,this.renderer.render(this.plants,this.elapsedTime),e&&this.play()}destroy(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.renderer.destroy(),this.plants=[],this.state="idle"}};var E=class E{constructor(e,i,r,n=1){this._hexCache=null;this._r=Math.round(Math.max(0,Math.min(255,e))),this._g=Math.round(Math.max(0,Math.min(255,i))),this._b=Math.round(Math.max(0,Math.min(255,r))),this._a=Math.max(0,Math.min(1,n))}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}get rgb(){return{r:this._r,g:this._g,b:this._b}}static fromHex(e){let i=e.replace("#",""),r,n,s,a=255;if(i.length===3)r=parseInt(i[0]+i[0],16),n=parseInt(i[1]+i[1],16),s=parseInt(i[2]+i[2],16);else if(i.length===6)r=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16);else if(i.length===8)r=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16),a=parseInt(i.substring(6,8),16);else return null;return isNaN(r)||isNaN(n)||isNaN(s)||isNaN(a)?null:new E(r,n,s,a/255)}static fromRGB(e,i=1){return new E(e.r,e.g,e.b,i)}static fromHSL(e,i,r,n=1){let s=i/100,a=r/100,o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(e/60%2-1)),h=a-o/2,m=0,u=0,p=0;return e<60?(m=o,u=l,p=0):e<120?(m=l,u=o,p=0):e<180?(m=0,u=o,p=l):e<240?(m=0,u=l,p=o):e<300?(m=l,u=0,p=o):(m=o,u=0,p=l),new E((m+h)*255,(u+h)*255,(p+h)*255,n)}static parse(e){if(e=e.trim().toLowerCase(),e.startsWith("#"))return E.fromHex(e);let i=e.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+))?\s*\)/);if(i)return new E(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),i[4]?parseFloat(i[4]):1);let r=e.match(/hsla?\s*\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?\s*(?:,\s*([\d.]+))?\s*\)/);return r?E.fromHSL(parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),r[4]?parseFloat(r[4]):1):null}toHex(e=!1){if(!e&&this._hexCache)return this._hexCache;let i="#"+this._r.toString(16).padStart(2,"0")+this._g.toString(16).padStart(2,"0")+this._b.toString(16).padStart(2,"0")+(e?Math.round(this._a*255).toString(16).padStart(2,"0"):"");return e||(this._hexCache=i),i}toRGBString(e=!1){return this._a<1||e?`rgba(${this._r}, ${this._g}, ${this._b}, ${this._a})`:`rgb(${this._r}, ${this._g}, ${this._b})`}toHSL(){let e=this._r/255,i=this._g/255,r=this._b/255,n=Math.max(e,i,r),s=Math.min(e,i,r),a=(n+s)/2;if(n===s)return{h:0,s:0,l:a*100};let o=n-s,l=a>.5?o/(2-n-s):o/(n+s),h=0;return n===e?h=((i-r)/o+(i<r?6:0))/6:n===i?h=((r-e)/o+2)/6:h=((e-i)/o+4)/6,{h:h*360,s:l*100,l:a*100}}lighten(e){return new E(this._r+(255-this._r)*e,this._g+(255-this._g)*e,this._b+(255-this._b)*e,this._a)}darken(e){return new E(this._r*(1-e),this._g*(1-e),this._b*(1-e),this._a)}withAlpha(e){return new E(this._r,this._g,this._b,e)}mix(e,i=.5){let r=Math.max(0,Math.min(1,i));return new E(this._r+(e._r-this._r)*r,this._g+(e._g-this._g)*r,this._b+(e._b-this._b)*r,this._a+(e._a-this._a)*r)}complement(){return new E(255-this._r,255-this._g,255-this._b,this._a)}saturate(e){let i=this.toHSL();return i.s=Math.min(100,i.s+e*100),E.fromHSL(i.h,i.s,i.l,this._a)}desaturate(e){let i=this.toHSL();return i.s=Math.max(0,i.s-e*100),E.fromHSL(i.h,i.s,i.l,this._a)}rotateHue(e){let i=this.toHSL();return i.h=(i.h+e)%360,i.h<0&&(i.h+=360),E.fromHSL(i.h,i.s,i.l,this._a)}luminance(){let e=this._r/255,i=this._g/255,r=this._b/255,n=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),s=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),a=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);return .2126*n+.7152*s+.0722*a}contrastWith(e){let i=this.luminance(),r=e.luminance(),n=Math.max(i,r),s=Math.min(i,r);return(n+.05)/(s+.05)}isLight(){return this.luminance()>.5}isDark(){return this.luminance()<=.5}equals(e){return this._r===e._r&&this._g===e._g&&this._b===e._b&&this._a===e._a}approximatelyEquals(e,i=1){return Math.abs(this._r-e._r)<=i&&Math.abs(this._g-e._g)<=i&&Math.abs(this._b-e._b)<=i&&Math.abs(this._a-e._a)<=i/255}clone(){return new E(this._r,this._g,this._b,this._a)}toString(){return this.toHex(this._a<1)}};E.WHITE=new E(255,255,255),E.BLACK=new E(0,0,0),E.TRANSPARENT=new E(0,0,0,0),E.RED=new E(255,0,0),E.GREEN=new E(0,255,0),E.BLUE=new E(0,0,255);var U=E;function nt(t){let e=U.fromHex(t);return e?e.rgb:null}function st(t,e,i){return new U(t,e,i).toHex()}function ot(t,e){let i=U.fromHex(t);return i?i.lighten(e).toHex():t}function lt(t,e){let i=U.fromHex(t);return i?i.darken(e).toHex():t}var C=class C{constructor(e,i){this.x=e,this.y=i}static from(e){return new C(e.x,e.y)}static fromArray(e){return new C(e[0],e[1])}static fromPolar(e,i){return new C(Math.cos(e)*i,Math.sin(e)*i)}static zero(){return new C(0,0)}static up(){return new C(0,-1)}static down(){return new C(0,1)}static left(){return new C(-1,0)}static right(){return new C(1,0)}static lerp(e,i,r){return new C(e.x+(i.x-e.x)*r,e.y+(i.y-e.y)*r)}static distance(e,i){let r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static distanceSquared(e,i){let r=i.x-e.x,n=i.y-e.y;return r*r+n*n}static angleBetween(e,i){return Math.atan2(i.y-e.y,i.x-e.x)}static temp(e,i){return C._tempVec.x=e,C._tempVec.y=i,C._tempVec}add(e){return new C(this.x+e.x,this.y+e.y)}subtract(e){return new C(this.x-e.x,this.y-e.y)}multiply(e){return new C(this.x*e,this.y*e)}divide(e){if(e===0)throw new Error("Vec2: Division by zero");return new C(this.x/e,this.y/e)}negate(){return new C(-this.x,-this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){let e=this.length();return e===0?new C(0,0):new C(this.x/e,this.y/e)}setLength(e){return this.normalize().multiply(e)}limit(e){return this.lengthSquared()>e*e?this.setLength(e):this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}angle(){return Math.atan2(this.y,this.x)}rotate(e){let i=Math.cos(e),r=Math.sin(e);return new C(this.x*i-this.y*r,this.x*r+this.y*i)}perpendicular(){return new C(-this.y,this.x)}reflect(e){let i=2*this.dot(e);return new C(this.x-i*e.x,this.y-i*e.y)}projectOnto(e){let i=e.lengthSquared();if(i===0)return C.zero();let r=this.dot(e)/i;return e.multiply(r)}lerp(e,i){return new C(this.x+(e.x-this.x)*i,this.y+(e.y-this.y)*i)}moveTowards(e,i){let r=e.x-this.x,n=e.y-this.y,s=r*r+n*n;if(s===0||s<=i*i)return new C(e.x,e.y);let a=Math.sqrt(s);return new C(this.x+r/a*i,this.y+n/a*i)}distanceTo(e){return C.distance(this,e)}distanceToSquared(e){return C.distanceSquared(this,e)}angleTo(e){return C.angleBetween(this,e)}clamp(e,i,r,n){return new C(Math.max(e,Math.min(r,this.x)),Math.max(i,Math.min(n,this.y)))}round(){return new C(Math.round(this.x),Math.round(this.y))}floor(){return new C(Math.floor(this.x),Math.floor(this.y))}ceil(){return new C(Math.ceil(this.x),Math.ceil(this.y))}abs(){return new C(Math.abs(this.x),Math.abs(this.y))}equals(e){return this.x===e.x&&this.y===e.y}approximatelyEquals(e,i=1e-4){return Math.abs(this.x-e.x)<i&&Math.abs(this.y-e.y)<i}isZero(){return this.x===0&&this.y===0}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}clone(){return new C(this.x,this.y)}toString(){return`Vec2(${this.x}, ${this.y})`}};C._tempVec=new C(0,0);var oe=C,be=class{constructor(e=0,i=0){this.x=e,this.y=i}set(e,i){return this.x=e,this.y=i,this}copy(e){return this.x=e.x,this.y=e.y,this}addMut(e){return this.x+=e.x,this.y+=e.y,this}subtractMut(e){return this.x-=e.x,this.y-=e.y,this}multiplyMut(e){return this.x*=e,this.y*=e,this}toVec2(){return new oe(this.x,this.y)}};var _i={endX:0,endY:0},Me=class{constructor(e){this.ctx=e}withState(e){this.ctx.save();try{e()}finally{this.ctx.restore()}}save(){return this.ctx.save(),this}restore(){return this.ctx.restore(),this}translate(e,i){return this.ctx.translate(e,i),this}rotate(e){return this.ctx.rotate(e),this}scale(e,i=e){return this.ctx.scale(e,i),this}resetTransform(){return this.ctx.setTransform(1,0,0,1,0,0),this}setFill(e){return this.ctx.fillStyle=e,this}setStroke(e,i){return this.ctx.strokeStyle=e,i!==void 0&&(this.ctx.lineWidth=i),this}setLineWidth(e){return this.ctx.lineWidth=e,this}setLineCap(e){return this.ctx.lineCap=e,this}setAlpha(e){return this.ctx.globalAlpha=e,this}setComposite(e){return this.ctx.globalCompositeOperation=e,this}fillRect(e,i,r,n,s){return s&&(this.ctx.fillStyle=s),this.ctx.fillRect(e,i,r,n),this}strokeRect(e,i,r,n,s){return s&&(this.ctx.strokeStyle=s),this.ctx.strokeRect(e,i,r,n),this}fillCircle(e,i,r,n){return r<=0?this:(this.ctx.beginPath(),this.ctx.arc(e,i,r,0,L.TWO_PI),n&&(this.ctx.fillStyle=n),this.ctx.fill(),this)}strokeCircle(e,i,r,n){return r<=0?this:(this.ctx.beginPath(),this.ctx.arc(e,i,r,0,L.TWO_PI),n&&(this.ctx.strokeStyle=n),this.ctx.stroke(),this)}fillEllipse(e,i,r,n,s=0,a){return r<=0||n<=0?this:(this.ctx.beginPath(),this.ctx.ellipse(e,i,r,n,s,0,L.TWO_PI),a&&(this.ctx.fillStyle=a),this.ctx.fill(),this)}line(e,i,r,n,s,a){return this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(r,n),s&&(this.ctx.strokeStyle=s),a!==void 0&&(this.ctx.lineWidth=a),this.ctx.stroke(),this}drawStem(e,i,r,n,s,a,o,l=_i){if(o<=0)return null;let h=r*Math.min(1,o);this.ctx.beginPath(),this.ctx.moveTo(e,i);let m=e+a*h*L.STEM_CP1_LEAN,u=i-h*L.STEM_CP1_HEIGHT,p=e+a*h*L.STEM_CP2_LEAN,d=i-h*L.STEM_CP2_HEIGHT,f=e+a*h,M=i-h;return this.ctx.bezierCurveTo(m,u,p,d,f,M),this.ctx.strokeStyle=s,this.ctx.lineWidth=n,this.ctx.lineCap=ue.LINE_CAP,this.ctx.stroke(),l.endX=f,l.endY=M,l}drawLeaf(e,i,r,n,s){return n<1?this:(this.withState(()=>{this.ctx.translate(e,i),this.ctx.rotate(r),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),this.ctx.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),this.ctx.fillStyle=s,this.ctx.fill()}),this)}drawLeafPair(e,i,r,n,s,a,o,l=3){return this.drawLeaf(e-l,i,r,s,o),this.drawLeaf(e+l,i,n,a,o),this}drawLeavesAlongStem(e,i,r,n,s,a,o,l,h){for(let m=0;m<a.length;m++){let u=a[m],p=i-r*u*n,d=e+s*r*u,M=(m%2===0?-1:1)*.6;this.drawLeaf(d,p,M,o*l,h)}return this}drawRadialPetals(e,i,r,n,s,a,o,l=0){for(let h=0;h<r;h++){let m=h/r*L.TWO_PI+l;this.withState(()=>{this.ctx.translate(e,i),this.ctx.rotate(m),this.ctx.beginPath(),this.ctx.ellipse(a,0,n,s,0,0,L.TWO_PI),this.ctx.fillStyle=o,this.ctx.fill()})}return this}drawFlowerCenter(e,i,r,n){return this.fillCircle(e,i,r,n)}beginPath(){return this.ctx.beginPath(),this}moveTo(e,i){return this.ctx.moveTo(e,i),this}lineTo(e,i){return this.ctx.lineTo(e,i),this}quadraticCurveTo(e,i,r,n){return this.ctx.quadraticCurveTo(e,i,r,n),this}bezierCurveTo(e,i,r,n,s,a){return this.ctx.bezierCurveTo(e,i,r,n,s,a),this}closePath(){return this.ctx.closePath(),this}fill(e){return e&&(this.ctx.fillStyle=e),this.ctx.fill(),this}stroke(e){return e&&(this.ctx.strokeStyle=e),this.ctx.stroke(),this}createLinearGradient(e,i,r,n){return this.ctx.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,s,a){return this.ctx.createRadialGradient(e,i,r,n,s,a)}setFont(e){return this.ctx.font=e,this}setTextAlign(e){return this.ctx.textAlign=e,this}fillText(e,i,r,n){return n&&(this.ctx.fillStyle=n),this.ctx.fillText(e,i,r),this}strokeText(e,i,r,n){return n&&(this.ctx.strokeStyle=n),this.ctx.strokeText(e,i,r),this}clear(e){return e?(this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)):this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this}clearRect(e,i,r,n){return this.ctx.clearRect(e,i,r,n),this}getContext(){return this.ctx}getDimensions(){return{width:this.ctx.canvas.width,height:this.ctx.canvas.height}}};function at(t,e,i,r,n,s,a,o){if(o<=0)return null;let l=r*Math.min(1,o);t.beginPath(),t.moveTo(e,i);let h=e+a*l*L.STEM_CP1_LEAN,m=i-l*L.STEM_CP1_HEIGHT,u=e+a*l*L.STEM_CP2_LEAN,p=i-l*L.STEM_CP2_HEIGHT,d=e+a*l,f=i-l;return t.bezierCurveTo(h,m,u,p,d,f),t.strokeStyle=s,t.lineWidth=n,t.lineCap=ue.LINE_CAP,t.stroke(),{x:d,y:f}}function we(t,e,i,r,n,s){n<1||(t.save(),t.translate(e,i),t.rotate(r),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),t.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),t.fillStyle=s,t.fill(),t.restore())}function ut(t,e,i,r,n,s,a,o,l=3){we(t,e-l,i,r,s,o),we(t,e+l,i,n,a,o)}var ye=class{constructor(){this.listeners=new Map}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!1};return this.listeners.get(e).add(r),()=>{this.off(e,i)}}once(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!0};return this.listeners.get(e).add(r),()=>{this.off(e,i)}}off(e,i){let r=this.listeners.get(e);if(r){for(let n of r)if(n.handler===i){r.delete(n);break}r.size===0&&this.listeners.delete(e)}}emit(e,i){let r=this.listeners.get(e);if(!r)return;let n=[];for(let s of r){try{s.handler(i)}catch(a){console.error(`Error in event handler for "${e}":`,a)}s.once&&n.push(s)}for(let s of n)r.delete(s);r.size===0&&this.listeners.delete(e)}hasListeners(e){let i=this.listeners.get(e);return i!==void 0&&i.size>0}listenerCount(e){let i=this.listeners.get(e);return i?i.size:0}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}eventNames(){return Array.from(this.listeners.keys())}},Ce=class{constructor(){this.listeners=new Map}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!1};return this.listeners.get(e).add(r),()=>this.off(e,i)}once(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!0};return this.listeners.get(e).add(r),()=>this.off(e,i)}off(e,i){let r=this.listeners.get(e);if(r){for(let n of r)if(n.handler===i){r.delete(n);break}r.size===0&&this.listeners.delete(e)}}emit(e,i){let r=this.listeners.get(e);if(!r)return;let n=[];for(let s of r){try{s.handler(i)}catch(a){console.error(`Error in event handler for "${String(e)}":`,a)}s.once&&n.push(s)}for(let s of n)r.delete(s);r.size===0&&this.listeners.delete(e)}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}};var H=class{static detect(){if(this._cached)return this._cached;if(!(typeof window<"u"&&typeof document<"u"))return this._cached={isBrowser:!1,hasCanvas:!1,hasResizeObserver:!1,hasRAF:!1,isHighDPI:!1,pixelRatio:1,hasTouch:!1,isMobile:!1,prefersReducedMotion:!1,prefersDarkMode:!1,isPageVisible:!0},this._cached;let i=window.devicePixelRatio||1;return this._cached={isBrowser:!0,hasCanvas:this.checkCanvasSupport(),hasResizeObserver:typeof ResizeObserver<"u",hasRAF:typeof requestAnimationFrame<"u",isHighDPI:i>1,pixelRatio:i,hasTouch:this.checkTouchSupport(),isMobile:this.checkMobile(),prefersReducedMotion:this.checkReducedMotion(),prefersDarkMode:this.checkDarkMode(),isPageVisible:this.checkPageVisibility()},this._cached}static clearCache(){this._cached=null}static checkCanvasSupport(){try{let e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}catch{return!1}}static checkTouchSupport(){return"ontouchstart"in window||navigator.maxTouchPoints>0||(navigator.msMaxTouchPoints||0)>0}static checkMobile(){let e=navigator.userAgent.toLowerCase(),r=["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(a=>e.includes(a)),n=window.innerWidth<=768,s=this.checkTouchSupport();return r||s&&n}static checkReducedMotion(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}static checkDarkMode(){return typeof window>"u"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}static checkPageVisibility(){return typeof document>"u"?!0:!document.hidden}static prefersReducedMotion(){return this.detect().prefersReducedMotion}static prefersDarkMode(){return this.detect().prefersDarkMode}static getPixelRatio(e=2){if(typeof window>"u")return 1;let i=window.devicePixelRatio||1;return Math.min(i,e)}static isPageVisible(){return typeof document>"u"?!0:!document.hidden}static isSupported(){let e=this.detect();return e.isBrowser&&e.hasCanvas&&e.hasRAF}static getRecommendedSettings(){let e=this.detect();return e.isMobile&&e.pixelRatio>2?{maxPixelRatio:1.5,targetFPS:24,density:"sparse"}:e.isMobile?{maxPixelRatio:2,targetFPS:30,density:"normal"}:e.isHighDPI?{maxPixelRatio:2,targetFPS:30,density:"normal"}:{maxPixelRatio:1,targetFPS:30,density:"dense"}}static onVisibilityChange(e){return typeof document>"u"?()=>{}:(this._visibilityListeners.add(e),this._visibilityHandler||(this._visibilityHandler=()=>{let i=!document.hidden;for(let r of this._visibilityListeners)try{r(i)}catch(n){console.error("Error in visibility change handler:",n)}},document.addEventListener("visibilitychange",this._visibilityHandler)),()=>{this._visibilityListeners.delete(e),this._visibilityListeners.size===0&&this._visibilityHandler&&(document.removeEventListener("visibilitychange",this._visibilityHandler),this._visibilityHandler=null)})}static onReducedMotionChange(e){if(typeof window>"u")return()=>{};let i=window.matchMedia("(prefers-reduced-motion: reduce)"),r=n=>{this._cached=null,e(n.matches)};return i.addEventListener?(i.addEventListener("change",r),()=>i.removeEventListener("change",r)):(i.addListener(r),()=>i.removeListener(r))}static onDarkModeChange(e){if(typeof window>"u")return()=>{};let i=window.matchMedia("(prefers-color-scheme: dark)"),r=n=>{this._cached=null,e(n.matches)};return i.addEventListener?(i.addEventListener("change",r),()=>i.removeEventListener("change",r)):(i.addListener(r),()=>i.removeListener(r))}static onResize(e){if(typeof window>"u")return()=>{};let i=()=>{this._cached=null,e(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}};H._cached=null,H._visibilityListeners=new Set,H._visibilityHandler=null;function ht(){return H.prefersReducedMotion()}function ct(t){return H.getPixelRatio(t)}function mt(){return H.detect().isBrowser}function pt(){return H.detect().hasCanvas}var le={natural:{name:"Natural",palette:"natural",accent:$.DEFAULT_ACCENT},sunset:{name:"Sunset",palette:"warm",accent:"#FF6B35",fadeColor:"#FFF5EB"},ocean:{name:"Ocean",palette:"cool",accent:"#0077B6",fadeColor:"#F0F8FF"},grayscale:{name:"Grayscale",palette:"grayscale",accent:"#666666",fadeColor:"#F5F5F5"},vibrant:{name:"Vibrant",palette:"vibrant",accent:"#FF1493"},sakura:{name:"Sakura",palette:"natural",accent:"#FFB7C5",flowerColors:["#FFB7C5","#FFDCE5","#FFC0CB","#FF69B4","#FFFFFF"],fadeColor:"#FFF5F7"},lavender:{name:"Lavender",palette:"cool",accent:"#9370DB",flowerColors:["#9370DB","#E6E6FA","#DDA0DD","#BA55D3","#8B008B"],foliageColors:["#556B2F","#6B8E23","#808000"],fadeColor:"#F5F0FF"},autumn:{name:"Autumn",palette:"warm",accent:"#D2691E",flowerColors:["#D2691E","#CD853F","#DAA520","#B8860B","#8B4513","#FF8C00"],foliageColors:["#8B4513","#A0522D","#CD853F","#D2691E"],fadeColor:"#FFF8DC"},midnight:{name:"Midnight",palette:"cool",accent:"#4169E1",flowerColors:["#4169E1","#6A5ACD","#9932CC","#8A2BE2","#483D8B"],foliageColors:["#2F4F4F","#006400","#228B22"],fadeColor:"#1A1A2E"},tropical:{name:"Tropical",palette:"vibrant",accent:"#FF4500",flowerColors:["#FF4500","#FF6347","#FFD700","#00CED1","#FF1493","#32CD32"],foliageColors:["#006400","#228B22","#32CD32"]},zen:{name:"Zen",palette:"grayscale",accent:"#8B8B83",flowerColors:["#FFFFFF","#F5F5F5","#E8E8E8","#98FB98"],foliageColors:["#556B2F","#6B8E23"],fadeColor:"#FAFAFA"}},Se={default:{name:"Default",description:"Balanced garden with moderate density and natural colors",options:{duration:600,generations:47,density:"normal",maxHeight:.35}},demo:{name:"Demo",description:"Fast 30-second animation for demonstrations",options:{duration:30,generations:10,density:"normal",maxHeight:.35,speed:1}},subtle:{name:"Subtle",description:"Sparse, low-opacity garden for website backgrounds",options:{duration:900,generations:30,density:"sparse",maxHeight:.25,opacity:.6,fadeHeight:.15}},lush:{name:"Lush",description:"Dense, vibrant garden with maximum plant coverage",options:{duration:600,generations:60,density:"lush",maxHeight:.45}},forest:{name:"Forest",description:"Tall garden with trees, climbers, and tall flowers",options:{duration:900,generations:50,density:"dense",maxHeight:.8,categories:["small-tree","conifer","climber","giant-grass","fern","bush"]}},meadow:{name:"Meadow",description:"Low wildflower meadow with grasses",options:{duration:600,generations:50,density:"dense",maxHeight:.25,categories:["wildflower","daisy","grass","simple-flower"]}},roseGarden:{name:"Rose Garden",description:"Elegant garden focused on roses",options:{duration:600,generations:40,density:"normal",maxHeight:.35,categories:["rose","bush","fern"]}},tropical:{name:"Tropical",description:"Lush tropical garden with palms and exotic flowers",options:{duration:600,generations:40,density:"dense",maxHeight:.7,categories:["tropical","orchid","lily","fern"]}},herbs:{name:"Herb Garden",description:"Fragrant herb garden with lavender and sage",options:{duration:600,generations:35,density:"normal",maxHeight:.25,categories:["herb","bush","grass"]}},succulent:{name:"Succulent Garden",description:"Low-maintenance succulent arrangement",options:{duration:300,generations:25,density:"dense",maxHeight:.15,categories:["succulent"]}},ambient:{name:"Ambient",description:"Very slow, continuous background animation",options:{duration:3600,generations:100,density:"sparse",maxHeight:.3,loop:!0,opacity:.5,fadeHeight:.1}},performance:{name:"Performance",description:"Optimized for lower-end devices",options:{duration:600,generations:30,density:"sparse",maxHeight:.3,targetFPS:24,maxPixelRatio:1}}};function ze(t,e={}){let i=typeof t=="string"?le[t]:t;i||(console.warn(`Theme "${t}" not found, using natural`),i=le.natural);let r={palette:i.palette,accent:i.accent,flowerColors:i.flowerColors,foliageColors:i.foliageColors,...e.colors};return{...e,colors:r,fadeColor:i.fadeColor??e.fadeColor}}function Ee(t,e={}){let i=typeof t=="string"?Se[t]:t;if(!i)return console.warn(`Preset "${t}" not found, using default`),Ee("default",e);let r=i.options.colors||e.colors?{...i.options.colors,...e.colors}:void 0;return{...i.options,...e,...r?{colors:r}:{}}}function dt(t,e="natural",i={}){let r=Ee(t,{}),n=ze(e,r),s=n.colors||i.colors?{...n.colors,...i.colors}:void 0;return{...n,...i,...s?{colors:s}:{}}}function ft(){return Object.keys(le)}function gt(){return Object.keys(Se)}function bt(t,e){return{name:t,...e}}function Mt(t,e,i){return{name:t,options:e,description:i}}function wt(t){return{sparse:{density:"sparse",generations:30},normal:{density:"normal",generations:47},dense:{density:"dense",generations:55},lush:{density:"lush",generations:65}}[t]}function yt(t){return{slow:{speed:.5,duration:1200},normal:{speed:1,duration:600},fast:{speed:2,duration:300},instant:{speed:10,duration:60}}[t]}return zt(Pi);})();
//# sourceMappingURL=index.global.js.map